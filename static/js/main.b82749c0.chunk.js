(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,r){e.exports={profile:"profile-header_profile__354am"}},109:function(e,t,r){e.exports={menu:"menu_menu__2lX_i"}},110:function(e,t,r){e.exports={main:"main_main__2W-l3"}},111:function(e,t,r){e.exports={tabContent:"burger-ingredients-tabs-content_tabContent__2GXi6"}},113:function(e,t,r){e.exports={card:"burger-ingredients-card_card__2yP4l"}},114:function(e,t,r){e.exports={tabs:"burger-ingredients-tabs_tabs__2TqWF"}},115:function(e,t,r){e.exports={ingredientDetailsItem:"ingredient-details-item_ingredientDetailsItem__2y40c"}},116:function(e,t,r){e.exports={burgerIngredients:"burger-ingredients_burgerIngredients__2i6ZI"}},118:function(e,t,r){e.exports={modalOverlay:"modal-overlay_modalOverlay__tfXD-"}},119:function(e,t,r){e.exports={tabs:"profile-tabs_tabs__3XWwc"}},120:function(e,t,r){e.exports={profileOrders:"profile-orders_profileOrders__m8HgN"}},121:function(e,t,r){e.exports={order:"profile-order_order__1Ikso"}},122:function(e,t,r){e.exports={textShadow:"performed-orders_textShadow__2IZ6H"}},123:function(e,t,r){e.exports={feed:"feed_feed__1Jw3v"}},124:function(e,t,r){e.exports={ingredient:"ingredient_ingredient__10O0J"}},229:function(e,t,r){},230:function(e,t,r){"use strict";r.r(t);var n,c,a,s,i=r(2),o=r(1),u=r.n(o),d=r(39),l=r(19),j=r.n(l),b=r(25),f=r(107),O=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,241)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},p={offset:"-100px",position:b.b.MIDDLE,timeout:3e3,transition:b.c.FADE},m=r(10),x=d.c,h=function(){return Object(d.b)()},_=r(5),g=r.n(_),v=r(8),y=function(e,t){document.cookie="".concat(e,"=").concat(t,"; Path=/;")},N=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},E=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=10;break}R(),e.next=11;break;case 10:throw new Error(n.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.accessToken,r=e.refreshToken;y("token",t.split("Bearer ")[1]),localStorage.setItem("refreshToken",r)},R=function(){var e;e="token",document.cookie="".concat(e,"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"),localStorage.removeItem("refreshToken")},D={login:E,logout:w,updateToken:S,register:I,forgotPassword:C,resetPassword:k,removeTokens:R},U="WS_CONNECTION_START",A="WS_CONNECTION_CLOSE",P="WS_CONNECTION_SUCCESS",L="WS_CONNECTION_ERROR",F="WS_CONNECTION_CLOSED",H="WS_GET_ORDER",W="WS_SEND_ORDER",z="WS_USER_CONNECTION_START",G="WS_USER_CONNECTION_CLOSE",B="WS_USER_CONNECTION_SUCCESS",M="WS_USER_CONNECTION_ERROR",J="WS_USER_CONNECTION_CLOSED",q="WS_USER_GET_ORDER",Q="WS_USER_SEND_ORDER",X="SET_AUTHORIZATION",Y="CLEAR_AUTHORIZATION",K="SET_EMAIL_RESET",V="LOGIN_REQUEST",Z="LOGIN_SUCCESS",$="LOGIN_FAILURE",ee="LOGOUT_REQUEST",te="LOGOUT_SUCCESS",re="LOGOUT_FAILURE",ne="UPDATE_TOKEN_REQUEST",ce="UPDATE_TOKEN_SUCCESS",ae="UPDATE_TOKEN_FAILURE",se="REGISTER_REQUEST",ie="REGISTER_SUCCESS",oe="REGISTER_FAILURE",ue="FORGOT_PASSWORD_REQUEST",de="FORGOT_PASSWORD_SUCCESS",le="FORGOT_PASSWORD_FAILURE",je="RESET_PASSWORD_REQUEST",be="RESET_PASSWORD_SUCCESS",fe="RESET_PASSWORD_FAILURE",Oe="GET_INGREDIENTS_REQUEST",pe="GET_INGREDIENTS_SUCCESS",me="GET_INGREDIENTS_FAILURE",xe="ADD_INGREDIENT",he="REMOVE_INGREDIENT",_e="UPDATE_INGREDIENTS",ge="CLEAR_SELECTED_INGREDIENTS",ve="INCREASE_COUNT",ye="DECREASE_COUNT",Ne="CHECKOUT_ORDER_REQUEST",Ee="CHECKOUT_ORDER_SUCCESS",we="CHECKOUT_ORDER_FAILURE",Se="GET_USER_REQUEST",Ie="GET_USER_SUCCESS",Ce="GET_USER_FAILURE",ke="UPDATE_USER_REQUEST",Te="UPDATE_USER_SUCCESS",Re="UPDATE_USER_FAILURE",De=function(e){var t=e.accessToken,r=e.refreshToken;return function(e){D.removeTokens(),y("token",t),localStorage.setItem("refreshToken",r),e({type:X,accessToken:t,refreshToken:r})}},Ue=function(e){return function(t){t({type:K,emailReset:e})}},Ae=function(e){var t=function(e){return{type:Z,data:e}};return function(){var r=Object(v.a)(g.a.mark((function r(n){var c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:V}),r.prev=1,r.next=4,D.login(e);case 4:c=r.sent,n(t(c)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((a=r.t0,{type:$,error:a}));case 11:case"end":return r.stop()}var a}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Pe=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:ee}),t.prev=1,t.next=4,D.logout(e);case 4:r({type:te}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:re,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){var t=function(e){return{type:ce,data:e}};return function(){var r=Object(v.a)(g.a.mark((function r(n){var c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:ne}),r.prev=1,r.next=4,D.updateToken(e);case 4:c=r.sent,n(t(c)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((a=r.t0,{type:ae,error:a}));case 11:case"end":return r.stop()}var a}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Fe=function(e){var t=function(e){return{type:ie,data:e}};return function(){var r=Object(v.a)(g.a.mark((function r(n){var c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:se}),r.prev=1,r.next=4,D.register(e);case 4:c=r.sent,n(t(c)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((a=r.t0,{type:oe,error:a}));case 11:case"end":return r.stop()}var a}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},He=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:ue}),t.prev=1,t.next=4,D.forgotPassword(e);case 4:r({type:de}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:le,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},We=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:je}),t.prev=1,t.next=4,D.resetPassword(e);case 4:r({type:be}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:fe,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},ze=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(v.a)(g.a.mark((function e(t,r){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return(n=e.sent).ok||r("ERROR network answer was not ok"),e.next=6,n.json();case 6:c=e.sent,t(c);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function e(){var t=function(e){return{type:pe,data:e}};return function(){var r=Object(v.a)(g.a.mark((function r(n){var c,a,s;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Oe}),r.prev=1,r.next=4,ze();case 4:c=r.sent,a=c.data,n(t(a)),r.next=17;break;case 9:if(r.prev=9,r.t0=r.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==r.t0.message||!s){r.next=16;break}return n(Le(s)),e(),r.abrupt("return");case 16:n((i=r.t0,{type:me,error:i}));case 17:case"end":return r.stop()}var i}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},Be=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({ingredients:t}),e.next=3,fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},body:r});case 3:return n=e.sent,e.next=6,n.json();case 6:if((c=e.sent).success){e.next=9;break}throw new Error(c.message);case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function e(t){var r=function(e){return{type:Ee,data:e}};return function(){var n=Object(v.a)(g.a.mark((function n(c){var a,s;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:Ne}),n.prev=1,n.next=4,Be(t);case 4:a=n.sent,c(r(a)),n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==n.t0.message||!s){n.next=15;break}return c(Le(s)),e(t),n.abrupt("return");case 15:c((i=n.t0,{type:we,error:i}));case 16:case"end":return n.stop()}var i}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},Je=function(){var e=Object(v.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return t=e.sent,e.next=5,t.json();case 5:if((r=e.sent).success){e.next=8;break}throw new Error(r.message);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe={getUser:Je,updateUser:qe},Xe=function e(){var t=function(e){return{type:Ie,data:e}};return function(){var r=Object(v.a)(g.a.mark((function r(n){var c,a;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Se}),r.prev=1,r.next=4,Qe.getUser();case 4:c=r.sent,n(t(c)),r.next=16;break;case 8:if(r.prev=8,r.t0=r.catch(1),a=localStorage.getItem("refreshToken"),"jwt expired"!==r.t0.message||!a){r.next=15;break}return n(Le(a)),e(),r.abrupt("return");case 15:n((s=r.t0,{type:Ce,error:s}));case 16:case"end":return r.stop()}var s}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Ye=function e(t){var r=function(e){return{type:Te,data:e}};return function(){var n=Object(v.a)(g.a.mark((function n(c){var a,s;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:ke}),n.prev=1,n.next=4,Qe.updateUser(t);case 4:a=n.sent,c(r(a)),n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==n.t0.message||!s){n.next=15;break}return c(Le(s)),e(t),n.abrupt("return");case 15:c((i=n.t0,{type:Re,error:i}));case 16:case"end":return n.stop()}var i}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},Ke=r(12),Ve=r(4),Ze=r(55),$e=r.n(Ze),et=r(40),tt=r.n(et),rt=r(0),nt=function(e){var t=e.svgIcon,r=e.text,n=e.path,c=void 0===n?"/":n,a=Object(Ke.g)().location.pathname,s="".concat(tt.a.menuItem," mb-3 mt-3 ml-5 mr-5"),i="".concat(tt.a.text," text text_type_main-default pl-2"),o="".concat(tt.a.link," text_color_inactive");return Object(rt.jsx)("li",{className:s,children:Object(rt.jsxs)(m.c,{to:c,className:o,activeClassName:a===c?tt.a.active:void 0,children:[t,Object(rt.jsx)("p",{className:i,children:r})]})})},ct=r(108),at=r.n(ct),st=function(){var e=Object(rt.jsx)(Ve.ProfileIcon,{type:"secondary"});return Object(rt.jsx)("ul",{className:at.a.profile,children:Object(rt.jsx)(nt,{svgIcon:e,text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",path:"/profile"})})},it=r(109),ot=r.n(it),ut=[{id:1,svgIcon:Object(rt.jsx)(Ve.BurgerIcon,{type:"primary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",padding:"p-5",path:"/"},{id:2,svgIcon:Object(rt.jsx)(Ve.ListIcon,{type:"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",padding:"p-5",path:"/feed"}],dt=function(){return Object(rt.jsx)("nav",{children:Object(rt.jsx)("ul",{className:ot.a.menu,children:ut.map((function(e){return Object(rt.jsx)(nt,Object(i.a)({},e),e.id)}))})})},lt=function(){var e="".concat($e.a.header," col-9");return Object(rt.jsx)("header",{className:$e.a.wrapper,children:Object(rt.jsxs)("div",{className:e,children:[Object(rt.jsx)(dt,{}),Object(rt.jsx)(m.b,{to:"/",className:$e.a.logo,children:Object(rt.jsx)(Ve.Logo,{})}),Object(rt.jsx)(st,{})]})})},jt=r(23),bt=["children"],ft=function(e){var t=e.children,r=Object(jt.a)(e,bt),n=h(),c=x((function(e){return e.auth})).isAuthorized,a=localStorage.getItem("refreshToken");return Object(o.useEffect)((function(){!c&&a&&n(Le(a))}),[n,c,a]),!c&&a?null:Object(rt.jsx)(Ke.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){var r=e.location;return c?t:Object(rt.jsx)(Ke.a,{to:{pathname:"/login",state:{from:r}}})}}))},Ot=r(110),pt=r.n(Ot),mt=function(e){var t=e.children,r="".concat(pt.a.main," col-9");return Object(rt.jsx)("main",{className:r,children:t})},xt=r(126),ht=r(237),_t=r(6),gt=r(111),vt=r.n(gt),yt=r(239),Nt=r(56),Et=r.n(Nt),wt=function(e){var t=e.ingredient,r=e.ingredientClickHandler,n=t._id,c=t.name,a=t.price,s=t.image,i=t.count,o=Object(yt.a)({type:"burgerIngredient",item:{id:n},collect:function(e){return{isDrag:e.isDragging()}}}),u=Object(_t.a)(o,2)[1];return Object(rt.jsx)("article",{className:Et.a.card,onClick:function(){return r(n)},ref:u,title:c,children:Object(rt.jsxs)("div",{className:"ml-3 mr-3",children:[i&&Object(rt.jsx)(Ve.Counter,{count:i,size:"default"}),Object(rt.jsx)("img",{src:s,alt:c,width:"100%"}),Object(rt.jsxs)("div",{className:Et.a.priceCurrency,children:[Object(rt.jsx)("span",{className:"text text_type_main-medium",children:a}),Object(rt.jsx)("div",{className:Et.a.currencyIcon,children:Object(rt.jsx)(Ve.CurrencyIcon,{type:"primary"})})]}),Object(rt.jsx)("span",{children:c})]})})},St=r(113),It=r.n(St),Ct=function(e){var t=e.title,r=e.ingredients,n=e.tabRef,c=e.ingredientClickHandler;return Object(rt.jsxs)("div",{ref:n,children:[Object(rt.jsx)("p",{className:"text text_type_main-medium mb-6",children:t}),Object(rt.jsx)("div",{className:It.a.card,children:r.map((function(e){return Object(rt.jsx)(wt,{ingredientClickHandler:c,ingredient:e},e._id)}))})]})},kt=function(e){var t=e.bunRef,r=e.sauceRef,n=e.mainRef,c=e.ingredientClickHandler,a=e.scrollContainerRef,s=e.handleScroll,i=x((function(e){return e.burger.ingredients})),o=[{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:i.filter((function(e){return"bun"===e.type})),tabRef:t},{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:i.filter((function(e){return"sauce"===e.type})),tabRef:r},{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:i.filter((function(e){return"main"===e.type})),tabRef:n}];return Object(rt.jsx)("div",{className:vt.a.tabContent,ref:a,onScroll:s,children:o.map((function(e){return Object(rt.jsx)(Ct,{title:e.title,ingredients:e.ingredients,tabRef:e.tabRef,ingredientClickHandler:c},e.title)}))})},Tt=r(114),Rt=r.n(Tt),Dt=function(e){var t=e.bunRef,r=e.sauceRef,n=e.mainRef,c=e.currentTab,a=e.tabClickHandler,s="".concat(Rt.a.tabs," mb-10");return Object(rt.jsxs)("div",{className:s,children:[Object(rt.jsx)(Ve.Tab,{value:"bun",active:"bun"===c,onClick:function(){return a("bun",t)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(rt.jsx)(Ve.Tab,{value:"sauce",active:"sauce"===c,onClick:function(){return a("sauce",r)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(rt.jsx)(Ve.Tab,{value:"main",active:"main"===c,onClick:function(){return a("main",n)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},Ut=r(115),At=r.n(Ut),Pt=function(e){var t=e.title,r=e.info;return Object(rt.jsxs)("div",{className:At.a.ingredientDetailsItem,children:[Object(rt.jsx)("span",{className:"text text_type_main-default",children:t}),Object(rt.jsx)("span",{className:"text text_type_digits-default",children:r})]})},Lt=r(82),Ft=r.n(Lt),Ht=function(e){e._id;var t=e.name,r=e.image_large,n=[{title:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",info:e.calories},{title:"\u0411\u0435\u043b\u043a\u0438, \u0433",info:e.proteins},{title:"\u0416\u0438\u0440\u044b, \u0433",info:e.fat},{title:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",info:e.carbohydrates}];return Object(rt.jsxs)("div",{className:Ft.a.ingredientDetails,children:[Object(rt.jsx)("img",{src:r,alt:"Ingredient"}),Object(rt.jsx)("span",{className:"text text_type_main-medium",style:{display:"block"},children:t}),Object(rt.jsx)("div",{className:Ft.a.helpfulness,children:n.map((function(e){return Object(rt.jsx)(Pt,Object(i.a)({},e),e.title)}))})]})},Wt=r(116),zt=r.n(Wt),Gt=r(117),Bt=r.n(Gt),Mt=(r(228),function(e){var t=e.height,r=void 0===t?100:t,n=e.width,c=void 0===n?100:n;return Object(rt.jsx)("div",{style:{margin:"5% auto 0",textAlign:"center"},children:Object(rt.jsx)(Bt.a,{type:"Oval",color:"#00BFFF",height:r,width:c})})}),Jt=r(118),qt=r.n(Jt),Qt=function(e){var t=e.children;return Object(rt.jsx)("div",{className:qt.a.modalOverlay,children:t})},Xt=r(57),Yt=r.n(Xt),Kt=document.getElementById("react-modals"),Vt=function(e){var t=e.header,r=e.onClose,n=e.children,c=Object(o.useRef)(null),a=Object(o.useCallback)((function(e){27===e.keyCode&&r()}),[r]),s=Object(o.useCallback)((function(e){var t,n=e.target;(null===(t=c.current)||void 0===t?void 0:t.contains(n))||r()}),[r]);return Object(o.useEffect)((function(){return document.addEventListener("keydown",a,!1),document.addEventListener("click",s,!1),function(){document.removeEventListener("keydown",a,!1),document.removeEventListener("click",s,!1)}}),[s,a]),c&&Object(l.createPortal)(Object(rt.jsx)(Qt,{children:Object(rt.jsxs)("div",{className:Yt.a.modal,ref:c,children:[Object(rt.jsxs)("header",{className:Yt.a.header,children:[Object(rt.jsx)("div",{className:Yt.a.close,onClick:r,children:Object(rt.jsx)(Ve.CloseIcon,{type:"primary"})}),t&&Object(rt.jsx)("span",{className:"text text_type_main-medium",children:t})]}),n]})}),Kt)},Zt=function(){var e=Object(Ke.g)(),t=Object(Ke.h)(),r=Object(o.useState)(!1),n=Object(_t.a)(r,2),c=n[0],a=n[1],s=Object(o.useState)(),u=Object(_t.a)(s,2),d=u[0],l=u[1],j=Object(o.useState)("bun"),b=Object(_t.a)(j,2),f=b[0],O=b[1],p=x((function(e){return e.burger.ingredients})),m=x((function(e){return e.burger.loading})),h=Object(o.useRef)(null),_=Object(o.useRef)(null),g=Object(o.useRef)(null),v=Object(o.useRef)(null);return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsxs)("section",{className:zt.a.burgerIngredients,children:[m&&Object(rt.jsx)(Mt,{}),!m&&p.length&&Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(rt.jsx)(Dt,{bunRef:_,sauceRef:g,mainRef:v,currentTab:f,tabClickHandler:function(e,t){var r;O(e),null===(r=t.current)||void 0===r||r.scrollIntoView({behavior:"smooth"})}}),Object(rt.jsx)(kt,{bunRef:_,sauceRef:g,mainRef:v,ingredientClickHandler:function(r){var n=p.filter((function(e){return e._id===r})).reduce((function(e,t){return t}),{});a(!0),l(n),e.push({pathname:"/ingredients/".concat(n._id),state:{background:t}})},scrollContainerRef:h,handleScroll:function(){var e,t,r,n,c=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().top)||0,a=(null===(t=_.current)||void 0===t?void 0:t.getBoundingClientRect().top)||0,s=(null===(r=g.current)||void 0===r?void 0:r.getBoundingClientRect().top)||0,i=(null===(n=v.current)||void 0===n?void 0:n.getBoundingClientRect().top)||0,o=Math.abs(c-a),u=Math.abs(c-s),d=Math.abs(c-i);O(o<u?"bun":u<d?"sauce":"main")}})]})]}),c&&d&&Object(rt.jsx)(Vt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){a(!1),e.push({pathname:"/"})},children:Object(rt.jsx)(Ht,Object(i.a)({},d))})]})},$t=r(240),er=r(58),tr=r.n(er),rr=Object(o.memo)((function(e){var t=e.findIngredient,r=e.moveIngredient,n=e.ingredient,c=h(),a=x((function(e){return e.burger})).selectedIngredients,s=function(e){var t=a.filter((function(t){return t._id===e})).reduce((function(e,t){return t}),{});c(function(e){return function(t){t({type:he,ingredient:e})}}(t)),c(function(e){return function(t){t({type:ye,ingredient:e})}}(t))},o=n.uniqueID,u=t?t(o).index:null,d=Object(yt.a)((function(){return{type:"burger",item:{uniqueID:o,originalIndex:u},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=e.uniqueID,c=e.originalIndex;t.didDrop()||r(n,c)}}}),[o,u,r]),l=Object(_t.a)(d,2),j=l[0].isDragging,b=l[1],f=Object($t.a)((function(){return{accept:"burger",canDrop:function(){return!1},hover:function(e){var n=e.uniqueID;if(n!==o){var c=t(o).index;r(n,c)}}}}),[t,r]),O=Object(_t.a)(f,2)[1],p=j?0:1;return Object(rt.jsxs)("div",{className:tr.a.ingredient,ref:function(e){return b(O(e))},style:{opacity:p},children:[Object(rt.jsx)("div",{className:tr.a.drag,children:Object(rt.jsx)(Ve.DragIcon,{type:"primary"})}),Object(rt.jsx)("div",{className:tr.a.ingredientEl,children:Object(rt.jsx)(Ve.ConstructorElement,Object(i.a)(Object(i.a)({},n),{},{handleClose:function(){return s(n._id)}}))})]})})),nr=r(83),cr=r.n(nr),ar=["type","text"],sr=Object(o.memo)((function(e){var t=e.type,r=e.text,n=Object(jt.a)(e,ar),c="".concat(r,"top"===t?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)");return Object(rt.jsx)("div",{className:cr.a.ingredient,children:Object(rt.jsx)("div",{className:cr.a.ingredientEl,children:Object(rt.jsx)(Ve.ConstructorElement,Object(i.a)(Object(i.a)({},n),{},{type:t,text:c}))})})})),ir=function(e,t){return{type:t,isLocked:!0,_id:null===e||void 0===e?void 0:e._id,uniqueID:null===e||void 0===e?void 0:e.uniqueID,text:null===e||void 0===e?void 0:e.name,price:null===e||void 0===e?void 0:e.price,thumbnail:null===e||void 0===e?void 0:e.image}},or=function(e){return e.filter((function(e){return"bun"!==e.type})).map((function(e){return{_id:null===e||void 0===e?void 0:e._id,uniqueID:null===e||void 0===e?void 0:e.uniqueID,text:null===e||void 0===e?void 0:e.name,price:null===e||void 0===e?void 0:e.price,thumbnail:null===e||void 0===e?void 0:e.image}}))},ur=r(41),dr=r.n(ur),lr=r(59),jr=r.n(lr),br=r.p+"static/media/done.85c3a14d.svg",fr=function(){var e=h(),t=x((function(e){return e.orderReducer})).order;Object(o.useEffect)((function(){return function(){e((function(e){e({type:ge})}))}}),[e]);var r="".concat(jr.a.orderId," text text_type_digits-large"),n="".concat(jr.a.textGrey," text text_type_main-default mt-2");return Object(rt.jsxs)("div",{className:jr.a.orderAccepted,children:[Object(rt.jsx)("span",{className:r,children:null===t||void 0===t?void 0:t.number}),Object(rt.jsx)("span",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(rt.jsx)("img",{src:br,alt:"Done",className:"mt-15"}),Object(rt.jsx)("span",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(rt.jsx)("span",{className:n,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Or=function(){var e=h(),t=Object(Ke.g)(),r=Object(o.useState)(!1),n=Object(_t.a)(r,2),c=n[0],a=n[1],s=x((function(e){return e.burger.selectedIngredients})),i=x((function(e){return e.auth})).isAuthorized,u=x((function(e){return e.orderReducer})),d=u.loading,l=u.order,j=s.map((function(e){return e._id}));Object(o.useEffect)((function(){!d&&l&&j.length&&e(function(e){return{type:W,payload:e}}({name:l.name,orderNumber:l.number,ingredientIDs:j}))}),[e,d,l,j]);var b=function(){var r=Object(v.a)(g.a.mark((function r(){return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i||t.push("/login"),s.filter((function(e){return"bun"===e.type})).length){r.next=4;break}return r.abrupt("return",null);case 4:e(Me(j)),a(!0);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(rt.jsxs)(rt.Fragment,{children:[d&&Object(rt.jsx)("div",{children:Object(rt.jsx)(Mt,{})}),!d&&Object(rt.jsx)(Ve.Button,{type:"primary",size:"large",onClick:b,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),c&&!d&&l&&Object(rt.jsx)(Vt,{onClose:function(){a(!1)},children:Object(rt.jsx)(fr,{})})]})},pr=function(){var e=x((function(e){return e.burger.selectedIngredients})).reduce((function(e,t){return e+t.price}),0);return Object(rt.jsx)("span",{className:"text text_type_digits-medium",children:e})},mr=Object(o.memo)((function(e){var t=e.onDropHandler,r=h(),n=x((function(e){return e.burger.selectedIngredients})),c=Object($t.a)({accept:"burgerIngredient",collect:function(e){return{isHoverConstructor:e.isOver()}},drop:function(e){t(e)}}),a=Object(_t.a)(c,2),s=a[0].isHoverConstructor,u=a[1],d=Object(o.useCallback)((function(e){var t=n.filter((function(t){return t.uniqueID===e}))[0];return{ingredient:t,index:n.indexOf(t)}}),[n]),l=Object(o.useCallback)((function(e,t){var n=d(e),c=n.ingredient,a=n.index;r(function(e,t,r){return function(n){n({type:_e,ingredient:e,index:t,atIndex:r})}}(c,a,t||0))}),[r,d]),j=Object($t.a)({accept:"burger",collect:function(e){return{isHover:e.isOver()}}}),b=Object(_t.a)(j,2),f=b[0].isHover,O=b[1],p=n.find((function(e){return"bun"===e.type})),m=s?"lightgreen":"transparent",_=f?"lightgreen":"transparent";return Object(rt.jsxs)("section",{ref:u,className:dr.a.ingredients,style:{borderColor:m},children:[p&&Object(rt.jsx)(sr,Object(i.a)({},ir(p,"top"))),Object(rt.jsx)("div",{ref:O,className:dr.a.ingredientsMiddle,style:{borderColor:_},children:n.length>0&&Object(rt.jsx)("div",{className:dr.a.middle,children:or(n).map((function(e,t){return Object(rt.jsx)(rr,{findIngredient:d,moveIngredient:l,ingredient:e},e._id+t)}))})}),p&&Object(rt.jsx)(sr,Object(i.a)({},ir(p,"bottom"))),n.length>0&&Object(rt.jsxs)("div",{className:dr.a.bottom,children:[Object(rt.jsx)(pr,{}),Object(rt.jsx)("div",{className:"ml-2 mr-10 mt-1",children:Object(rt.jsx)(Ve.CurrencyIcon,{type:"primary"})}),Object(rt.jsx)(Or,{})]})]})})),xr=function(){var e=h(),t=Object(Ke.g)(),r=x((function(e){return e.burger})),n=r.ingredients,c=r.selectedIngredients,a=Object(b.d)();Object(o.useEffect)((function(){"POP"===t.action&&t.push(t.location.pathname)}),[t]);return Object(rt.jsxs)(ht.a,{backend:xt.a,children:[Object(rt.jsx)(Zt,{}),Object(rt.jsx)(mr,{onDropHandler:function(t){var r=n.filter((function(e){return e._id===t.id})).reduce((function(e,t){return t}),{});if(!c.length&&"bun"!==r.type)return a.show("\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0434\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u0443\u043b\u043a\u0443"),!1;e(function(e){return function(t){t({type:xe,ingredient:e})}}(r)),e(function(e){return function(t){t({type:ve,ingredient:e})}}(r))}})]})},hr=r(16),_r=r(119),gr=r.n(_r),vr=[{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile"},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",path:"/profile/orders"},{title:"\u0412\u044b\u0445\u043e\u0434",path:"/logout"}],yr=function(){var e=h(),t=Object(Ke.g)(),r=t.location,n=Object(o.useState)("/profile"),c=Object(_t.a)(n,2),a=c[0],s=c[1],i=x((function(e){return e.auth})).refreshToken;Object(o.useEffect)((function(){s(r.pathname)}),[r.pathname]);return Object(rt.jsx)("div",{className:gr.a.tabs,children:vr.map((function(r){return Object(rt.jsx)(Ve.Tab,{value:r.path,active:a===r.path,onClick:function(){return function(r){if("/logout"===r.path)return e(Pe(i)),void t.push("/login");s(r.path),t.push(r.path)}(r)},children:r.title},r.path)}))})},Nr=r(28),Er=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(e,"_").concat((new Date).getTime()+t)},wr=function(e,t){var r=[Object(i.a)(Object(i.a)({},e),{},{uniqueID:Er(e._id)})],n=Object(Nr.a)(t);return"bun"===e.type&&(r.push(Object(i.a)(Object(i.a)({},e),{},{uniqueID:Er(e._id,100)})),n=t.filter((function(e){return"bun"!==e.type}))),r.concat(n)},Sr=function(e,t){return t.filter((function(t){return t.uniqueID!==e.uniqueID}))},Ir=function(e,t){return t.map((function(t){var r=1;return"bun"===e.type&&(r=2,delete t.count),t._id===e._id&&(t.count?t.count+=r:t.count=r),t}))},Cr=function(e,t){return t.map((function(t){return t._id===e._id&&(1===t.count?delete t.count:t.count&&t.count>1&&(t.count-=1)),t}))},kr=r(85),Tr=r.n(kr),Rr={name:"",email:"",password:""},Dr={name:!1},Ur=function(){var e=h(),t=Object(o.useState)(Rr),r=Object(_t.a)(t,2),n=r[0],c=r[1],a=Object(o.useState)(Dr),s=Object(_t.a)(a,2),u=s[0],d=s[1],l=x((function(e){return e.profile})).user,j=Object(b.d)();Object(o.useEffect)((function(){e(Xe())}),[e]),Object(o.useEffect)((function(){c((function(e){return Object(i.a)(Object(i.a)({},e),l)}))}),[l]);var f=function(e){var t=e.target,r=t.name,a=t.value;c(Object(i.a)(Object(i.a)({},n),{},Object(hr.a)({},r,a))),d(Object(i.a)(Object(i.a)({},u),{},Object(hr.a)({},r,!1)))};return Object(rt.jsxs)("div",{className:Tr.a.profile,children:[Object(rt.jsx)(yr,{}),Object(rt.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(Ye(function(e){var t=Object(i.a)({},e);for(var r in t)t[r]||delete t[r];return t}(n))),c((function(e){return Object(i.a)(Object(i.a)({},e),{},{password:""})})),j.show("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")},className:Tr.a.form,children:[Object(rt.jsx)(Ve.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:f,value:n.name,name:"name",size:"default",error:u.name,errorText:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.EmailInput,{onChange:f,value:n.email,name:"email"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.PasswordInput,{onChange:f,value:n.password,name:"password"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(rt.jsx)("div",{className:"mr-4"}),Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",onClick:function(){c(Object(i.a)(Object(i.a)({},l),{},{password:""}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})},Ar=r(238),Pr=r(26),Lr=r.n(Pr),Fr={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",created:"\u0421\u043e\u0437\u0434\u0430\u043d"},Hr=function(e){var t=e.orderId,r=e.ingredients,n=e.ordersAll.orders.filter((function(e){return Number(e.number)===Number(t)})),c=Object(_t.a)(n,1)[0];if(!c)return null;var a=c.ingredients.reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),s=r.filter((function(e){return c.ingredients.includes(e._id)})).map((function(e){return e.amount=a[e._id],e})),i=s.filter((function(e){return c.ingredients.includes(e._id)})).reduce((function(e,t){return e+t.price*(t.amount||1)}),0);return Object(rt.jsxs)("div",{className:Lr.a.feedDetails,children:[Object(rt.jsxs)("div",{className:"text text_type_digits-default",style:{textAlign:"center"},children:["#",t]}),Object(rt.jsx)("div",{className:"mb-10"}),Object(rt.jsx)("div",{className:"text text_type_main-medium",children:c.name}),Object(rt.jsx)("div",{className:"mb-3"}),Object(rt.jsx)("div",{className:"text text_type_digits-small",style:{color:"#00CCCC"},children:Fr[c.status]}),Object(rt.jsx)("div",{className:"mb-15"}),Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)("div",{className:Lr.a.feedOrderList,children:s.map((function(e,t){return Object(rt.jsxs)(o.Fragment,{children:[Object(rt.jsxs)("div",{className:Lr.a.feedOrder,children:[Object(rt.jsx)("div",{children:Object(rt.jsx)("img",{src:"/ingredient-preview/".concat(e._id,".png"),alt:"Ingredient"})}),Object(rt.jsx)("div",{className:"mr-4"}),Object(rt.jsx)("div",{className:"text text_type_main-default",style:{maxWidth:350},children:e.name}),Object(rt.jsx)("div",{className:"mr-4"}),Object(rt.jsxs)("div",{className:Lr.a.price,children:[Object(rt.jsxs)("div",{className:"text text_type_digits-default mr-2",children:[e.amount," x ",e.price]}),Object(rt.jsx)("div",{className:Lr.a.currencyIcon,children:Object(rt.jsx)(Ve.CurrencyIcon,{type:"primary"})})]})]}),Object(rt.jsx)("div",{className:"mb-4"})]},t)}))}),Object(rt.jsx)("div",{className:"mb-10"}),Object(rt.jsxs)("div",{className:Lr.a.bottom,children:[Object(rt.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:Object(Ar.a)(new Date(c.createdAt),"dd.MM.yyyy HH:mm:ss")}),Object(rt.jsxs)("div",{className:Lr.a.price,children:[Object(rt.jsx)("div",{className:"text text_type_digits-default mr-2",children:i}),Object(rt.jsx)("div",{className:Lr.a.currencyIcon,children:Object(rt.jsx)(Ve.CurrencyIcon,{type:"primary"})})]})]})]})},Wr=r(120),zr=r.n(Wr),Gr=r(86),Br=r.n(Gr),Mr=r(87),Jr=r.n(Mr),qr=function(e){var t=e.ingredient,r=e.ingredientsCount,n=e.index;if(n+1>4)return null;var c=r-4;return Object(rt.jsxs)("div",{className:Jr.a.cardIngredient,style:{zIndex:10-n},children:[r>4&&n+1===4&&Object(rt.jsx)("div",{className:Jr.a.hasMore,children:c>0&&Object(rt.jsxs)("div",{className:"text text_type_digits-default",children:["+",r-4]})}),Object(rt.jsx)("img",{src:"/ingredient-preview/".concat(t,".png"),alt:"Ingredient"})]})},Qr=r(29),Xr=r.n(Qr),Yr=function(e){var t=e.order,r=e.ingredients,n=e.cardClickHandler,c=Object(Ke.g)().location,a=Object(o.useState)(!1),s=Object(_t.a)(a,2),i=s[0],u=s[1];Object(o.useEffect)((function(){"/profile/orders"===c.pathname&&u(!0)}),[c.pathname]);var d=t.ingredients.reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),l=r.filter((function(e){return t.ingredients.includes(e._id)})).map((function(e){return e.amount=d[e._id],e})).filter((function(e){return t.ingredients.includes(e._id)})).reduce((function(e,t){return e+t.price*(t.amount||1)}),0);return Object(rt.jsx)("div",{className:Xr.a.cards,onClick:function(){return n(t)},children:Object(rt.jsxs)("div",{className:Xr.a.card,children:[Object(rt.jsxs)("div",{className:Xr.a.cardHeader,children:[Object(rt.jsxs)("div",{className:"text text_type_digits-default",children:["#",t.number]}),Object(rt.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:Object(Ar.a)(new Date(t.createdAt),"dd.MM.yyyy HH:mm:ss")})]}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)("div",{className:"text text_type_main-medium",children:t.name}),i&&Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsx)("div",{className:"mb-2"}),Object(rt.jsx)("div",{className:"text text_type_digits-small",style:{color:"#00CCCC"},children:Fr[t.status]})]}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsxs)("div",{className:Xr.a.cardInfo,children:[Object(rt.jsx)("div",{className:Xr.a.cardIngredients,children:t.ingredients.map((function(e,r){return Object(rt.jsx)(qr,{ingredient:e,ingredientsCount:t.ingredients.length,index:r},r)}))}),Object(rt.jsxs)("div",{className:Xr.a.price,children:[Object(rt.jsx)("div",{className:"text text_type_digits-default mr-2",children:l}),Object(rt.jsx)("div",{className:Xr.a.currencyIcon,children:Object(rt.jsx)(Ve.CurrencyIcon,{type:"primary"})})]})]})]})})},Kr=["cardClickHandler","ingredients"],Vr=function(e){var t=e.cardClickHandler,r=e.ingredients,n=Object(jt.a)(e,Kr).orders;return n?n.length?Object(rt.jsx)("div",{className:Br.a.cardsWrapper,children:n.map((function(e){return Object(rt.jsx)(Yr,{order:e,ingredients:r,cardClickHandler:t},e.number)}))}):Object(rt.jsxs)("div",{className:Br.a.cardsWrapper,children:[Object(rt.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432."}),Object(rt.jsx)("p",{children:"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0432\u0430\u0448 \u043f\u0435\u0440\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 :)"})]}):null},Zr=function(){var e=Object(Ke.g)(),t=Object(Ke.h)(),r=h(),n=Object(o.useState)(!1),c=Object(_t.a)(n,2),a=c[0],s=c[1],u=Object(o.useState)(""),d=Object(_t.a)(u,2),l=d[0],j=d[1],b=x((function(e){return e.burger.ingredients})),f=x((function(e){return e.wsUserReducer})).userOrders,O=Object(_t.a)(f,1)[0];if(Object(o.useEffect)((function(){"POP"===e.action&&e.push(e.location.pathname)}),[e]),Object(o.useEffect)((function(){return r({type:z}),function(){r({type:G})}}),[r]),!O)return null;return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsxs)("div",{className:zr.a.profileOrders,children:[Object(rt.jsx)(yr,{}),Object(rt.jsx)(Vr,Object(i.a)(Object(i.a)({},O),{},{ingredients:b,cardClickHandler:function(r){s(!0),j(String(r.number)),e.push({pathname:"/profile/orders/".concat(r.number),state:{background:t}})}}))]}),a&&Object(rt.jsx)(Vt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:function(){s(!1),e.push({pathname:"/profile/orders"})},children:Object(rt.jsx)(Hr,{orderId:l,ingredients:b,ordersAll:O})})]})},$r=r(121),en=r.n($r),tn=function(){var e=Object(Ke.i)().orderId,t=x((function(e){return e.burger})).ingredients,r=x((function(e){return e.wsReducer.orders})),n=Object(_t.a)(r,1)[0];return n?Object(rt.jsx)("div",{className:en.a.order,children:Object(rt.jsx)(Hr,{orderId:e,ingredients:t,ordersAll:n})}):null},rn=r(32),nn=r.n(rn),cn={email:"",password:""},an=function(){var e,t,r=h(),n=Object(o.useState)(cn),c=Object(_t.a)(n,2),a=c[0],s=c[1],u=Object(Ke.h)(),d=x((function(e){return e.auth})),l=d.isAuthorized,j=d.error;if(l)return Object(rt.jsx)(Ke.a,{to:{pathname:(null===(e=u.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"}});var b=function(e){var t=e.target,r=t.name,n=t.value;s(Object(i.a)(Object(i.a)({},a),{},Object(hr.a)({},r,n)))},f="".concat(nn.a.flexRow," text text_type_main-default text_color_inactive"),O="".concat(nn.a.error," mt-6 mb-8");return Object(rt.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.email&&a.email.trim()&&a.password&&a.password.trim()&&r(Ae(a))},className:nn.a.login,children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.EmailInput,{onChange:b,value:a.email,name:"email"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.PasswordInput,{onChange:b,value:a.password,name:"password"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),j&&Object(rt.jsx)("div",{className:O,children:j}),!j&&Object(rt.jsx)("div",{className:"mb-20"}),Object(rt.jsxs)("div",{className:f,children:[Object(rt.jsx)("div",{className:"mr-1",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(rt.jsx)("div",{children:Object(rt.jsx)(m.b,{to:"/register",className:nn.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsxs)("div",{className:f,children:[Object(rt.jsx)("div",{className:"mr-1",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(rt.jsx)("div",{children:Object(rt.jsx)(m.b,{to:"/forgot-password",className:nn.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})]})]})},sn=function(e,t,r){var n=!0;return e.forEach((function(e){t[e]&&""!==t[e].trim()||(n=!1,r((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(hr.a)({},e,!0))})))})),n},on=r(42),un=r.n(on),dn={name:"",email:"",password:""},ln={name:!1,email:!1,password:!1},jn=["name","email","password"],bn=function(){var e=h(),t=Object(o.useState)(dn),r=Object(_t.a)(t,2),n=r[0],c=r[1],a=Object(o.useState)(ln),s=Object(_t.a)(a,2),u=s[0],d=s[1],l=x((function(e){return e.auth})).error,j=function(e){var t=e.target,r=t.name,a=t.value;c(Object(i.a)(Object(i.a)({},n),{},Object(hr.a)({},r,a))),d(Object(i.a)(Object(i.a)({},u),{},Object(hr.a)({},r,!1)))};if(localStorage.getItem("refreshToken"))return Object(rt.jsx)(Ke.a,{to:{pathname:"/"}});var b="".concat(un.a.flexRow," text text_type_main-default text_color_inactive"),f="".concat(un.a.error," mt-6 mb-8");return Object(rt.jsx)("div",{className:un.a.register,children:Object(rt.jsxs)("form",{onSubmit:function(t){t.preventDefault(),sn(jn,n,d)&&e(Fe(n))},children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:j,value:n.name,name:"name",size:"default",error:u.name,errorText:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.EmailInput,{onChange:j,value:n.email,name:"email"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.PasswordInput,{onChange:j,value:n.password,name:"password"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),l&&Object(rt.jsx)("div",{className:f,children:l}),!l&&Object(rt.jsx)("div",{className:"mb-20"}),Object(rt.jsxs)("div",{className:b,children:[Object(rt.jsx)("div",{className:"mr-1",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(rt.jsx)("div",{children:Object(rt.jsx)(m.b,{to:"/login",className:un.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})})},fn=r(43),On=r.n(fn),pn=function(){var e=h(),t=Object(Ke.g)(),r=Object(o.useState)({email:""}),n=Object(_t.a)(r,2),c=n[0],a=n[1],s=x((function(e){return e.auth})),i=s.emailReset,u=s.error,d=localStorage.getItem("refreshToken");Object(o.useEffect)((function(){i&&t.replace("/reset-password")}),[t,i]);if(d)return Object(rt.jsx)(Ke.a,{to:{pathname:"/"}});var l="".concat(On.a.flexRow," text text_type_main-default text_color_inactive"),j="".concat(On.a.error," mt-6 mb-4");return Object(rt.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c.email&&c.email.trim()&&e(He(c.email))},className:On.a.forgotPassword,children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.EmailInput,{onChange:function(e){var t=e.target;a({email:t.value})},value:c.email,name:"email"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),u&&Object(rt.jsx)("div",{className:j,children:u}),!u&&Object(rt.jsx)("div",{className:"mb-20"}),Object(rt.jsxs)("div",{className:l,children:[Object(rt.jsx)("div",{className:"mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(rt.jsx)("div",{children:Object(rt.jsx)(m.b,{to:"/login",className:On.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},mn=r(44),xn=r.n(mn),hn={password:"",code:""},_n={code:!1},gn=["code"],vn=function(){var e=h(),t=Object(o.useState)(hn),r=Object(_t.a)(t,2),n=r[0],c=r[1],a=Object(o.useState)(_n),s=Object(_t.a)(a,2),u=s[0],d=s[1],l=x((function(e){return e.auth})),j=l.isAuthorized,b=l.emailReset,f=l.error,O=function(e){var t=e.target,r=t.name,a=t.value;c(Object(i.a)(Object(i.a)({},n),{},Object(hr.a)({},r,a))),d(Object(i.a)(Object(i.a)({},u),{},Object(hr.a)({},r,!1)))};if(j)return Object(rt.jsx)(Ke.a,{to:{pathname:"/"}});if(!b)return Object(rt.jsx)(Ke.a,{to:{pathname:"/forgot-password"}});var p="".concat(xn.a.flexRow," text text_type_main-default text_color_inactive"),_="".concat(xn.a.error," mt-6 mb-8");return Object(rt.jsxs)("form",{onSubmit:function(t){t.preventDefault(),sn(gn,n,d)&&(e(We(n)),e(Ue(!1)))},className:xn.a.resetPassword,children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.PasswordInput,{onChange:O,value:n.password,name:"password"}),Object(rt.jsx)("div",{className:"mb-4"}),Object(rt.jsx)(Ve.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:O,value:n.code,name:"code",size:"default",error:u.code,errorText:"\u041a\u043e\u0434 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(rt.jsx)("div",{className:"mb-6"}),Object(rt.jsx)(Ve.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),f&&Object(rt.jsx)("div",{className:_,children:f}),!f&&Object(rt.jsx)("div",{className:"mb-20"}),Object(rt.jsxs)("div",{className:p,children:[Object(rt.jsx)("div",{className:"mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(rt.jsx)("div",{children:Object(rt.jsx)(m.b,{to:"/login",className:xn.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},yn=r(122),Nn=r.n(yn),En=function(e){var t,r=e.text,n=e.amount;return Object(rt.jsxs)("div",{children:[Object(rt.jsxs)("div",{className:"text text_type_main-medium",children:[r,":"]}),Object(rt.jsx)("div",{className:"text text_type_digits-large",children:Object(rt.jsx)("span",{className:Nn.a.textShadow,children:(t=n,t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))})})]})},wn=r(60),Sn=r.n(wn),In=function(e){var t=e.total,r=e.totalToday,n=e.orders,c=n.filter((function(e,t){return"done"===e.status&&t<10})).map((function(e){return{_id:e._id,number:e.number}})),a=n.filter((function(e,t){return"pending"===e.status&&t<10})).map((function(e){return{_id:e._id,number:e.number}}));return Object(rt.jsxs)("div",{className:Sn.a.ordersStatusList,children:[Object(rt.jsxs)("div",{className:Sn.a.ordersReadyAndInProgress,children:[Object(rt.jsxs)("div",{className:Sn.a.ordersReady,children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(rt.jsx)("div",{className:"mb-6"}),c.map((function(e){return Object(rt.jsxs)(o.Fragment,{children:[Object(rt.jsx)("div",{className:"text text_type_digits-default",style:{color:"#00CCCC"},children:e.number}),Object(rt.jsx)("div",{className:"mb-2"})]},e._id)}))]}),Object(rt.jsxs)("div",{children:[Object(rt.jsx)("div",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(rt.jsx)("div",{className:"mb-6"}),a.map((function(e){return Object(rt.jsxs)(o.Fragment,{children:[Object(rt.jsx)("div",{className:"text text_type_digits-default",children:e.number}),Object(rt.jsx)("div",{className:"mb-2"})]},e._id)}))]})]}),Object(rt.jsx)("div",{className:"mb-15"}),Object(rt.jsx)(En,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f",amount:t}),Object(rt.jsx)("div",{className:"mb-15"}),Object(rt.jsx)(En,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",amount:r})]})},Cn=r(88),kn=r.n(Cn),Tn=function(){var e=Object(Ke.g)(),t=Object(Ke.h)(),r=h(),n=Object(o.useState)(!1),c=Object(_t.a)(n,2),a=c[0],s=c[1],u=Object(o.useState)(""),d=Object(_t.a)(u,2),l=d[0],j=d[1],b=x((function(e){return e.burger})).ingredients,f=x((function(e){return e.wsReducer.orders})),O=Object(_t.a)(f,1)[0];if(Object(o.useEffect)((function(){"POP"===e.action&&e.push(e.location.pathname)}),[e]),Object(o.useEffect)((function(){return r({type:U}),function(){r({type:A})}}),[r]),console.log(10,f),!O)return null;return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsxs)("section",{className:kn.a.feedsWrapper,children:[Object(rt.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(rt.jsxs)("div",{className:kn.a.feeds,children:[Object(rt.jsx)(Vr,Object(i.a)(Object(i.a)({},O),{},{ingredients:b,cardClickHandler:function(r){s(!0),j(String(r.number)),e.push({pathname:"/feed/".concat(r.number),state:{background:t}})}})),Object(rt.jsx)(In,Object(i.a)({},O))]})]}),a&&Object(rt.jsx)(Vt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:function(){s(!1),e.push({pathname:"/feed"})},children:Object(rt.jsx)(Hr,{orderId:l,ingredients:b,ordersAll:O})})]})},Rn=r(123),Dn=r.n(Rn),Un=function(){var e=Object(Ke.i)().orderId,t=x((function(e){return e.burger})).ingredients,r=x((function(e){return e.wsReducer.orders}));if(!(null===r||void 0===r?void 0:r.length))return null;var n=Object(_t.a)(r,1)[0];return n?Object(rt.jsx)("div",{className:Dn.a.feed,children:Object(rt.jsx)(Hr,{orderId:e,ingredients:t,ordersAll:n})}):null},An=r(124),Pn=r.n(An),Ln=function(){var e=Object(Ke.i)().ingredientId,t=Object(o.useState)(null),r=Object(_t.a)(t,2),n=r[0],c=r[1],a=x((function(e){return e.burger.ingredients}));return Object(o.useEffect)((function(){if(a.length){var t=a.find((function(t){return t._id===e}))||null;c(t)}}),[a,e]),Object(rt.jsx)("div",{className:Pn.a.ingredient,children:n&&Object(rt.jsx)(Ht,Object(i.a)({},n))})},Fn=r(45),Hn=r.n(Fn),Wn=function(){var e=Object(Ke.h)();return Object(rt.jsxs)("div",{className:Hn.a.noMatch,children:[Object(rt.jsx)("span",{className:Hn.a.notFound,children:"404"}),Object(rt.jsxs)("span",{className:Hn.a.path,children:["Page not found for ",e.pathname]}),Object(rt.jsx)(m.b,{to:"/",className:Hn.a.path,children:"Go to main page"})]})},zn=function(){var e=Object(Ke.h)(),t=e.state&&e.state.background;return Object(rt.jsxs)(rt.Fragment,{children:[Object(rt.jsx)(lt,{}),Object(rt.jsx)(mt,{children:Object(rt.jsxs)(Ke.d,{location:t||e,children:[Object(rt.jsx)(Ke.b,{path:"/login",exact:!0,children:Object(rt.jsx)(an,{})}),Object(rt.jsx)(Ke.b,{path:"/register",exact:!0,children:Object(rt.jsx)(bn,{})}),Object(rt.jsx)(Ke.b,{path:"/forgot-password",exact:!0,children:Object(rt.jsx)(pn,{})}),Object(rt.jsx)(Ke.b,{path:"/reset-password",exact:!0,children:Object(rt.jsx)(vn,{})}),Object(rt.jsx)(Ke.b,{path:"/ingredients/:ingredientId",children:Object(rt.jsx)(Ln,{})}),Object(rt.jsx)(Ke.b,{path:"/feed/:orderId",children:Object(rt.jsx)(Un,{})}),Object(rt.jsx)(Ke.b,{path:"/feed",exact:!0,children:Object(rt.jsx)(Tn,{})}),Object(rt.jsx)(Ke.b,{path:"/",exact:!0,children:Object(rt.jsx)(xr,{})}),Object(rt.jsx)(ft,{path:"/profile",exact:!0,children:Object(rt.jsx)(Ur,{})}),Object(rt.jsx)(ft,{path:"/profile/orders/:orderId",children:Object(rt.jsx)(tn,{})}),Object(rt.jsx)(ft,{path:"/profile/orders",exact:!0,children:Object(rt.jsx)(Zr,{})}),Object(rt.jsx)(Ke.b,{path:"*",children:Object(rt.jsx)(Wn,{})})]})})]})},Gn=function(){var e=h();return function(){var e=h(),t=x((function(e){return e.auth})).isAuthorized;Object(o.useEffect)((function(){var r,n=null!==(r=N("token"))&&void 0!==r?r:"",c=localStorage.getItem("refreshToken");!t&&c&&e(De({accessToken:n,refreshToken:c}))}),[e,t])}(),Object(o.useEffect)((function(){e(Ge())}),[e]),Object(rt.jsx)(m.a,{children:Object(rt.jsx)(zn,{})})},Bn=r(24),Mn=r(125),Jn={error:null,loading:!1,user:null},qn={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,selectedIngredients:[],selectedIngredient:{},loading:!1,error:null},Qn={loading:!1,user:null,accessToken:null,refreshToken:null,isAuthorized:!1,emailReset:!1,error:null},Xn={wsConnected:!1,orders:[]},Yn={wsUserConnected:!1,userOrders:[]},Kn={loading:!1,error:null,order:null},Vn=Object(Bn.b)({burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case pe:return Object(i.a)(Object(i.a)({},e),{},{ingredients:t.data,loading:!1,error:null});case me:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});case xe:return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:wr(t.ingredient,e.selectedIngredients)});case he:return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:Sr(t.ingredient,e.selectedIngredients)});case _e:var r=Object(Nr.a)(e.selectedIngredients);return r.splice(t.index,1),r.splice(t.atIndex,0,t.ingredient),Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:r});case ge:var n=e.ingredients.map((function(e){return e.count=0,e}));return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:[],ingredients:n});case ve:return Object(i.a)(Object(i.a)({},e),{},{ingredients:Ir(t.ingredient,e.ingredients)});case ye:return Object(i.a)(Object(i.a)({},e),{},{ingredients:Cr(t.ingredient,e.ingredients)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,accessToken:t.accessToken,refreshToken:t.refreshToken});case Y:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,accessToken:null,refreshToken:null});case K:return Object(i.a)(Object(i.a)({},e),{},{emailReset:t.emailReset});case V:return Object(i.a)(Object(i.a)({},e),{},{error:null});case Z:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,user:t.data.user,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken});case $:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,error:t.error.toString()});case ee:return Object(i.a)(Object(i.a)({},e),{},{error:null});case te:return Object(i.a)(Object(i.a)({},e),{},{user:null,isAuthorized:!1,accessToken:null,refreshToken:null});case re:return Object(i.a)(Object(i.a)({},e),{},{error:t.error.toString()});case ne:return Object(i.a)(Object(i.a)({},e),{},{error:null});case ce:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken,error:null});case ae:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,accessToken:null,refreshToken:null,error:t.error.toString()});case se:return Object(i.a)(Object(i.a)({},e),{},{error:null});case ie:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,isAuthorized:!0,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken});case oe:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,error:t.error.toString()});case ue:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case de:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,emailReset:!0});case le:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:!0});case je:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case be:return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case fe:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:!0});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case Ie:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,loading:!1,error:null});case Ce:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});case ke:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case Te:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,loading:!1,error:null});case Re:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});default:return e}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case Ee:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:null,order:t.data.order});case we:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});default:return e}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(i.a)(Object(i.a)({},e),{},{wsConnected:!0});case L:case F:return Object(i.a)(Object(i.a)({},e),{},{wsConnected:!1});case H:return Object(i.a)(Object(i.a)({},e),{},{orders:e.orders.length?[].concat(Object(Nr.a)(e.orders),[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]):[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]});default:return e}},wsUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(i.a)(Object(i.a)({},e),{},{wsUserConnected:!0});case M:case J:return Object(i.a)(Object(i.a)({},e),{},{wsUserConnected:!1});case q:return Object(i.a)(Object(i.a)({},e),{},{userOrders:e.userOrders.length?[].concat(Object(Nr.a)(e.userOrders),[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]):[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]});default:return e}}}),Zn=["success"],$n=["success"],ec={wsInit:U,wsClose:A,wsSendOrder:W,onOpen:P,onClose:F,onError:L,onOrder:H},tc={wsUserInit:z,wsUserClose:G,wsUserSendOrder:Q,userOnOpen:B,userOnClose:J,userOnError:M,userOnOrder:q},rc=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:Bn.c)(Object(Bn.a)(Mn.a),Object(Bn.a)((a="wss://norma.nomoreparties.space/orders/all",s=ec,function(e){var t=null;return function(r){return function(n){var c=e.dispatch,o=e.getState,u=n.type,d=n.payload,l=s.wsInit,j=s.wsClose,b=s.wsSendOrder,f=s.onOpen,O=s.onClose,p=s.onError,m=s.onOrder,x=o().auth.accessToken;if(u===l&&(t=new WebSocket("".concat(a))),t&&(u===j&&t.close(1e3,"Close websocket without error."),t.onopen=function(e){c({type:f,payload:e})},t.onerror=function(e){c({type:p,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(jt.a)(r,Zn));c({type:m,payload:n})},t.onclose=function(e){c({type:O,payload:e})},u===b)){var h=Object(i.a)(Object(i.a)({},d),{},{token:x});t.send(JSON.stringify(h))}r(n)}}})),Object(Bn.a)((n="wss://norma.nomoreparties.space/orders",c=tc,function(e){var t=null;return function(r){return function(a){var s=e.dispatch,o=e.getState,u=a.type,d=a.payload,l=c.wsUserInit,j=c.wsUserClose,b=c.wsUserSendOrder,f=c.userOnOpen,O=c.userOnClose,p=c.userOnError,m=c.userOnOrder,x=o().auth.accessToken;if(u===l&&x&&(t=new WebSocket("".concat(n,"?token=").concat(x))),t&&(u===j&&t.close(1e3,"Close user websocket without error."),t.onopen=function(e){s({type:f,payload:e})},t.onerror=function(e){s({type:p,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(jt.a)(r,$n));s({type:m,payload:n})},t.onclose=function(e){s({type:O,payload:e})},u===b)){var h=Object(i.a)(Object(i.a)({},d),{},{token:x});t.send(JSON.stringify(h))}r(a)}}}))),nc=(r(229),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Bn.d)(Vn,e,rc)}());j.a.render(Object(rt.jsx)(u.a.StrictMode,{children:Object(rt.jsx)(d.a,{store:nc,children:Object(rt.jsx)(b.a,Object(i.a)(Object(i.a)({template:f.a},p),{},{children:Object(rt.jsx)(Gn,{})}))})}),document.getElementById("root")),O()},26:function(e,t,r){e.exports={feedDetails:"feed-details_feedDetails__7ZO_I",feedOrderList:"feed-details_feedOrderList__6W2Y4",feedOrder:"feed-details_feedOrder__2NLVS",price:"feed-details_price__2m7Z4",currencyIcon:"feed-details_currencyIcon__24m1h",bottom:"feed-details_bottom__2RmSR"}},29:function(e,t,r){e.exports={cards:"card_cards__2dc2s",card:"card_card__1py-W",cardHeader:"card_cardHeader__3QlUF",cardInfo:"card_cardInfo__X0cv6",cardIngredients:"card_cardIngredients__1E4al",price:"card_price__1ePjW",currencyIcon:"card_currencyIcon__3SnXu"}},32:function(e,t,r){e.exports={login:"login_login__3BYA9",flexRow:"login_flexRow__2s35h",link:"login_link__2bcVJ",error:"login_error__2R0VM"}},40:function(e,t,r){e.exports={menuItem:"header-item_menuItem__n7cBj",link:"header-item_link__5dJ7M",text:"header-item_text__1EUcT",active:"header-item_active__3w2YP"}},41:function(e,t,r){e.exports={ingredients:"burger-constructor_ingredients__3srro",ingredientsMiddle:"burger-constructor_ingredientsMiddle__2YBUz",middle:"burger-constructor_middle__2oDRJ",bottom:"burger-constructor_bottom__1l2yp"}},42:function(e,t,r){e.exports={register:"register_register__1-FiH",flexRow:"register_flexRow__FfD8I",link:"register_link__2XLtm",error:"register_error__9iRzL"}},43:function(e,t,r){e.exports={forgotPassword:"forgot-password_forgotPassword__2EIQe",flexRow:"forgot-password_flexRow__2D8FM",link:"forgot-password_link__1xRFL",error:"forgot-password_error__38bMz"}},44:function(e,t,r){e.exports={resetPassword:"reset-password_resetPassword__j7gJq",flexRow:"reset-password_flexRow__3_TYL",link:"reset-password_link__2wk5C",error:"reset-password_error__3_maO"}},45:function(e,t,r){e.exports={noMatch:"no-match_noMatch__2vtcG",notFound:"no-match_notFound__12QH4",path:"no-match_path__1CgfL"}},55:function(e,t,r){e.exports={wrapper:"app-header_wrapper__ECTu6",header:"app-header_header__1iHLW",logo:"app-header_logo__zVEfY"}},56:function(e,t,r){e.exports={card:"burger-ingredients-card-item_card__3iZWF",priceCurrency:"burger-ingredients-card-item_priceCurrency__9U12E",currencyIcon:"burger-ingredients-card-item_currencyIcon__1NUuu"}},57:function(e,t,r){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",close:"modal_close__1Iez6"}},58:function(e,t,r){e.exports={ingredient:"burger-constructor-item_ingredient__bbhJg",ingredientEl:"burger-constructor-item_ingredientEl__5HaoO",drag:"burger-constructor-item_drag__4gTMq"}},59:function(e,t,r){e.exports={orderAccepted:"order-details_orderAccepted__3OIcz",orderId:"order-details_orderId__vw7fX",textGrey:"order-details_textGrey__1B3ID"}},60:function(e,t,r){e.exports={ordersStatusList:"order-status-list_ordersStatusList__Mm-pw",ordersReadyAndInProgress:"order-status-list_ordersReadyAndInProgress__YpiOY",ordersReady:"order-status-list_ordersReady__2gKT3"}},82:function(e,t,r){e.exports={ingredientDetails:"ingredient-details_ingredientDetails__20EW8",helpfulness:"ingredient-details_helpfulness__1sUP5"}},83:function(e,t,r){e.exports={ingredient:"burger-constructor-bun_ingredient__14QCe",ingredientEl:"burger-constructor-bun_ingredientEl__2Cbu-"}},85:function(e,t,r){e.exports={profile:"profile_profile__26YER",form:"profile_form__3yKlC"}},86:function(e,t,r){e.exports={cardsWrapper:"card-list_cardsWrapper__3yChi"}},87:function(e,t,r){e.exports={cardIngredient:"feed-card_cardIngredient__320Tz",hasMore:"feed-card_hasMore__souup"}},88:function(e,t,r){e.exports={feedsWrapper:"feeds_feedsWrapper__3glnX",feeds:"feeds_feeds__3jl-H"}}},[[230,1,2]]]);
//# sourceMappingURL=main.b82749c0.chunk.js.map