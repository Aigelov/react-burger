(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,r){e.exports={profile:"profile-header_profile__354am"}},109:function(e,t,r){e.exports={menu:"menu_menu__2lX_i"}},110:function(e,t,r){e.exports={main:"main_main__2W-l3"}},111:function(e,t,r){e.exports={tabContent:"burger-ingredients-tabs-content_tabContent__2GXi6"}},113:function(e,t,r){e.exports={card:"burger-ingredients-card_card__2yP4l"}},114:function(e,t,r){e.exports={tabs:"burger-ingredients-tabs_tabs__2TqWF"}},115:function(e,t,r){e.exports={ingredientDetailsItem:"ingredient-details-item_ingredientDetailsItem__2y40c"}},116:function(e,t,r){e.exports={burgerIngredients:"burger-ingredients_burgerIngredients__2i6ZI"}},118:function(e,t,r){e.exports={modalOverlay:"modal-overlay_modalOverlay__tfXD-"}},119:function(e,t,r){e.exports={tabs:"profile-tabs_tabs__3XWwc"}},120:function(e,t,r){e.exports={profileOrders:"profile-orders_profileOrders__m8HgN"}},121:function(e,t,r){e.exports={order:"profile-order_order__1Ikso"}},122:function(e,t,r){e.exports={textShadow:"performed-orders_textShadow__2IZ6H"}},123:function(e,t,r){e.exports={feed:"feed_feed__1Jw3v"}},124:function(e,t,r){e.exports={ingredient:"ingredient_ingredient__10O0J"}},229:function(e,t,r){},230:function(e,t,r){"use strict";r.r(t);var n,a,c,s,i=r(2),o=r(1),u=r.n(o),d=r(39),l=r(19),j=r.n(l),b=r(25),f=r(107),O=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,241)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},p={offset:"-100px",position:b.b.MIDDLE,timeout:3e3,transition:b.c.FADE},m=r(10),x=d.c,h=function(){return Object(d.b)()},g=r(5),_=r.n(g),v=r(8),y=function(e,t){document.cookie="".concat(e,"=").concat(t,"; Path=/;")},N=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},E=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=10;break}R(),e.next=11;break;case 10:throw new Error(n.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({token:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(n=e.sent).success){e.next=11;break}R(),T(n),e.next=12;break;case 11:throw new Error(n.message);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({email:t})});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.accessToken,r=e.refreshToken;y("token",t.split("Bearer ")[1]),localStorage.setItem("refreshToken",r)},R=function(){var e;e="token",document.cookie="".concat(e,"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"),localStorage.removeItem("refreshToken")},D={login:E,logout:w,updateToken:S,register:I,forgotPassword:k,resetPassword:C,removeTokens:R},U="WS_CONNECTION_START",A="WS_CONNECTION_SUCCESS",P="WS_CONNECTION_ERROR",L="WS_CONNECTION_CLOSED",F="WS_GET_ORDER",H="WS_SEND_ORDER",z="WS_USER_CONNECTION_START",W="WS_USER_CONNECTION_SUCCESS",G="WS_USER_CONNECTION_ERROR",B="WS_USER_CONNECTION_CLOSED",M="WS_USER_GET_ORDER",J="WS_USER_SEND_ORDER",q="SET_AUTHORIZATION",Q="CLEAR_AUTHORIZATION",X="SET_EMAIL_RESET",Y="LOGIN_REQUEST",K="LOGIN_SUCCESS",V="LOGIN_FAILURE",Z="LOGOUT_REQUEST",$="LOGOUT_SUCCESS",ee="LOGOUT_FAILURE",te="UPDATE_TOKEN_REQUEST",re="UPDATE_TOKEN_SUCCESS",ne="UPDATE_TOKEN_FAILURE",ae="REGISTER_REQUEST",ce="REGISTER_SUCCESS",se="REGISTER_FAILURE",ie="FORGOT_PASSWORD_REQUEST",oe="FORGOT_PASSWORD_SUCCESS",ue="FORGOT_PASSWORD_FAILURE",de="RESET_PASSWORD_REQUEST",le="RESET_PASSWORD_SUCCESS",je="RESET_PASSWORD_FAILURE",be="GET_INGREDIENTS_REQUEST",fe="GET_INGREDIENTS_SUCCESS",Oe="GET_INGREDIENTS_FAILURE",pe="ADD_INGREDIENT",me="REMOVE_INGREDIENT",xe="UPDATE_INGREDIENTS",he="CLEAR_SELECTED_INGREDIENTS",ge="INCREASE_COUNT",_e="DECREASE_COUNT",ve="CHECKOUT_ORDER_REQUEST",ye="CHECKOUT_ORDER_SUCCESS",Ne="CHECKOUT_ORDER_FAILURE",Ee="GET_USER_REQUEST",we="GET_USER_SUCCESS",Se="GET_USER_FAILURE",Ie="UPDATE_USER_REQUEST",ke="UPDATE_USER_SUCCESS",Ce="UPDATE_USER_FAILURE",Te=function(e){var t=e.accessToken,r=e.refreshToken;return function(e){D.removeTokens(),y("token",t),localStorage.setItem("refreshToken",r),e({type:q,accessToken:t,refreshToken:r})}},Re=function(e){return function(t){t({type:X,emailReset:e})}},De=function(e){var t=function(e){return{type:K,data:e}};return function(){var r=Object(v.a)(_.a.mark((function r(n){var a;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Y}),r.prev=1,r.next=4,D.login(e);case 4:a=r.sent,n(t(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((c=r.t0,{type:V,error:c}));case 11:case"end":return r.stop()}var c}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Ue=function(e){return function(){var t=Object(v.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:Z}),t.prev=1,t.next=4,D.logout(e);case 4:r({type:$}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:ee,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},Ae=function(e){var t=function(e){return{type:re,data:e}};return function(){var r=Object(v.a)(_.a.mark((function r(n){var a;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:te}),r.prev=1,r.next=4,D.updateToken(e);case 4:a=r.sent,n(t(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((c=r.t0,{type:ne,error:c}));case 11:case"end":return r.stop()}var c}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Pe=function(e){var t=function(e){return{type:ce,data:e}};return function(){var r=Object(v.a)(_.a.mark((function r(n){var a;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:ae}),r.prev=1,r.next=4,D.register(e);case 4:a=r.sent,n(t(a)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n((c=r.t0,{type:se,error:c}));case 11:case"end":return r.stop()}var c}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Le=function(e){return function(){var t=Object(v.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:ie}),t.prev=1,t.next=4,D.forgotPassword(e);case 4:r({type:oe}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:ue,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},Fe=function(e){return function(){var t=Object(v.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:de}),t.prev=1,t.next=4,D.resetPassword(e);case 4:r({type:le}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r((n=t.t0,{type:je,error:n}));case 10:case"end":return t.stop()}var n}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},He=function(){var e=Object(v.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(v.a)(_.a.mark((function e(t,r){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/ingredients",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return(n=e.sent).ok||r("ERROR network answer was not ok"),e.next=6,n.json();case 6:a=e.sent,t(a);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function e(){var t=function(e){return{type:fe,data:e}};return function(){var r=Object(v.a)(_.a.mark((function r(n){var a,c,s;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:be}),r.prev=1,r.next=4,He();case 4:a=r.sent,c=a.data,n(t(c)),r.next=17;break;case 9:if(r.prev=9,r.t0=r.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==r.t0.message||!s){r.next=16;break}return n(Ae(s)),e(),r.abrupt("return");case 16:n((i=r.t0,{type:Oe,error:i}));case 17:case"end":return r.stop()}var i}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},We=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({ingredients:t}),e.next=3,fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},body:r});case 3:return n=e.sent,e.next=6,n.json();case 6:if((a=e.sent).success){e.next=9;break}throw new Error(a.message);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function e(t){var r=function(e){return{type:ye,data:e}};return function(){var n=Object(v.a)(_.a.mark((function n(a){var c,s;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:ve}),n.prev=1,n.next=4,We(t);case 4:c=n.sent,a(r(c)),n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==n.t0.message||!s){n.next=15;break}return a(Ae(s)),e(t),n.abrupt("return");case 15:a((i=n.t0,{type:Ne,error:i}));case 16:case"end":return n.stop()}var i}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},Be=function(){var e=Object(v.a)(_.a.mark((function e(){var t,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer"});case 2:return t=e.sent,e.next=5,t.json();case 5:if((r=e.sent).success){e.next=8;break}throw new Error(r.message);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(v.a)(_.a.mark((function e(t){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N("token"))},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:if((n=e.sent).success){e.next=8;break}throw new Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je={getUser:Be,updateUser:Me},qe=function e(){var t=function(e){return{type:we,data:e}};return function(){var r=Object(v.a)(_.a.mark((function r(n){var a,c;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Ee}),r.prev=1,r.next=4,Je.getUser();case 4:a=r.sent,n(t(a)),r.next=16;break;case 8:if(r.prev=8,r.t0=r.catch(1),c=localStorage.getItem("refreshToken"),"jwt expired"!==r.t0.message||!c){r.next=15;break}return n(Ae(c)),e(),r.abrupt("return");case 15:n((s=r.t0,{type:Se,error:s}));case 16:case"end":return r.stop()}var s}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Qe=function e(t){var r=function(e){return{type:ke,data:e}};return function(){var n=Object(v.a)(_.a.mark((function n(a){var c,s;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:Ie}),n.prev=1,n.next=4,Je.updateUser(t);case 4:c=n.sent,a(r(c)),n.next=16;break;case 8:if(n.prev=8,n.t0=n.catch(1),s=localStorage.getItem("refreshToken"),"jwt expired"!==n.t0.message||!s){n.next=15;break}return a(Ae(s)),e(t),n.abrupt("return");case 15:a((i=n.t0,{type:Ce,error:i}));case 16:case"end":return n.stop()}var i}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},Xe=r(12),Ye=r(4),Ke=r(55),Ve=r.n(Ke),Ze=r(40),$e=r.n(Ze),et=r(0),tt=function(e){var t=e.svgIcon,r=e.text,n=e.path,a=void 0===n?"/":n,c=Object(Xe.g)().location.pathname,s="".concat($e.a.menuItem," mb-3 mt-3 ml-5 mr-5"),i="".concat($e.a.text," text text_type_main-default pl-2"),o="".concat($e.a.link," text_color_inactive");return Object(et.jsx)("li",{className:s,children:Object(et.jsxs)(m.c,{to:a,className:o,activeClassName:c===a?$e.a.active:void 0,children:[t,Object(et.jsx)("p",{className:i,children:r})]})})},rt=r(108),nt=r.n(rt),at=function(){var e=Object(et.jsx)(Ye.ProfileIcon,{type:"secondary"});return Object(et.jsx)("ul",{className:nt.a.profile,children:Object(et.jsx)(tt,{svgIcon:e,text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",path:"/profile"})})},ct=r(109),st=r.n(ct),it=[{id:1,svgIcon:Object(et.jsx)(Ye.BurgerIcon,{type:"primary"}),text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",padding:"p-5",path:"/"},{id:2,svgIcon:Object(et.jsx)(Ye.ListIcon,{type:"secondary"}),text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",padding:"p-5",path:"/feed"}],ot=function(){return Object(et.jsx)("nav",{children:Object(et.jsx)("ul",{className:st.a.menu,children:it.map((function(e){return Object(et.jsx)(tt,Object(i.a)({},e),e.id)}))})})},ut=function(){var e="".concat(Ve.a.header," col-9");return Object(et.jsx)("header",{className:Ve.a.wrapper,children:Object(et.jsxs)("div",{className:e,children:[Object(et.jsx)(ot,{}),Object(et.jsx)(m.b,{to:"/",className:Ve.a.logo,children:Object(et.jsx)(Ye.Logo,{})}),Object(et.jsx)(at,{})]})})},dt=r(23),lt=["children"],jt=function(e){var t=e.children,r=Object(dt.a)(e,lt),n=h(),a=x((function(e){return e.auth})).isAuthorized,c=localStorage.getItem("refreshToken");return Object(o.useEffect)((function(){!a&&c&&n(Ae(c))}),[n,a,c]),!a&&c?null:Object(et.jsx)(Xe.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){var r=e.location;return a?t:Object(et.jsx)(Xe.a,{to:{pathname:"/login",state:{from:r}}})}}))},bt=r(110),ft=r.n(bt),Ot=function(e){var t=e.children,r="".concat(ft.a.main," col-9");return Object(et.jsx)("main",{className:r,children:t})},pt=r(126),mt=r(237),xt=r(6),ht=r(111),gt=r.n(ht),_t=r(239),vt=r(56),yt=r.n(vt),Nt=function(e){var t=e.ingredient,r=e.ingredientClickHandler,n=t._id,a=t.name,c=t.price,s=t.image,i=t.count,o=Object(_t.a)({type:"burgerIngredient",item:{id:n},collect:function(e){return{isDrag:e.isDragging()}}}),u=Object(xt.a)(o,2)[1];return Object(et.jsx)("article",{className:yt.a.card,onClick:function(){return r(n)},ref:u,title:a,children:Object(et.jsxs)("div",{className:"ml-3 mr-3",children:[i&&Object(et.jsx)(Ye.Counter,{count:i,size:"default"}),Object(et.jsx)("img",{src:s,alt:a,width:"100%"}),Object(et.jsxs)("div",{className:yt.a.priceCurrency,children:[Object(et.jsx)("span",{className:"text text_type_main-medium",children:c}),Object(et.jsx)("div",{className:yt.a.currencyIcon,children:Object(et.jsx)(Ye.CurrencyIcon,{type:"primary"})})]}),Object(et.jsx)("span",{children:a})]})})},Et=r(113),wt=r.n(Et),St=function(e){var t=e.title,r=e.ingredients,n=e.tabRef,a=e.ingredientClickHandler;return Object(et.jsxs)("div",{ref:n,children:[Object(et.jsx)("p",{className:"text text_type_main-medium mb-6",children:t}),Object(et.jsx)("div",{className:wt.a.card,children:r.map((function(e){return Object(et.jsx)(Nt,{ingredientClickHandler:a,ingredient:e},e._id)}))})]})},It=function(e){var t=e.bunRef,r=e.sauceRef,n=e.mainRef,a=e.ingredientClickHandler,c=e.scrollContainerRef,s=e.handleScroll,i=x((function(e){return e.burger.ingredients})),o=[{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:i.filter((function(e){return"bun"===e.type})),tabRef:t},{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:i.filter((function(e){return"sauce"===e.type})),tabRef:r},{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:i.filter((function(e){return"main"===e.type})),tabRef:n}];return Object(et.jsx)("div",{className:gt.a.tabContent,ref:c,onScroll:s,children:o.map((function(e){return Object(et.jsx)(St,{title:e.title,ingredients:e.ingredients,tabRef:e.tabRef,ingredientClickHandler:a},e.title)}))})},kt=r(114),Ct=r.n(kt),Tt=function(e){var t=e.bunRef,r=e.sauceRef,n=e.mainRef,a=e.currentTab,c=e.tabClickHandler,s="".concat(Ct.a.tabs," mb-10");return Object(et.jsxs)("div",{className:s,children:[Object(et.jsx)(Ye.Tab,{value:"bun",active:"bun"===a,onClick:function(){return c("bun",t)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(et.jsx)(Ye.Tab,{value:"sauce",active:"sauce"===a,onClick:function(){return c("sauce",r)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(et.jsx)(Ye.Tab,{value:"main",active:"main"===a,onClick:function(){return c("main",n)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},Rt=r(115),Dt=r.n(Rt),Ut=function(e){var t=e.title,r=e.info;return Object(et.jsxs)("div",{className:Dt.a.ingredientDetailsItem,children:[Object(et.jsx)("span",{className:"text text_type_main-default",children:t}),Object(et.jsx)("span",{className:"text text_type_digits-default",children:r})]})},At=r(82),Pt=r.n(At),Lt=function(e){e._id;var t=e.name,r=e.image_large,n=[{title:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",info:e.calories},{title:"\u0411\u0435\u043b\u043a\u0438, \u0433",info:e.proteins},{title:"\u0416\u0438\u0440\u044b, \u0433",info:e.fat},{title:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",info:e.carbohydrates}];return Object(et.jsxs)("div",{className:Pt.a.ingredientDetails,children:[Object(et.jsx)("img",{src:r,alt:"Ingredient"}),Object(et.jsx)("span",{className:"text text_type_main-medium",style:{display:"block"},children:t}),Object(et.jsx)("div",{className:Pt.a.helpfulness,children:n.map((function(e){return Object(et.jsx)(Ut,Object(i.a)({},e),e.title)}))})]})},Ft=r(116),Ht=r.n(Ft),zt=r(117),Wt=r.n(zt),Gt=(r(228),function(e){var t=e.height,r=void 0===t?100:t,n=e.width,a=void 0===n?100:n;return Object(et.jsx)("div",{style:{margin:"5% auto 0",textAlign:"center"},children:Object(et.jsx)(Wt.a,{type:"Oval",color:"#00BFFF",height:r,width:a})})}),Bt=r(118),Mt=r.n(Bt),Jt=function(e){var t=e.children;return Object(et.jsx)("div",{className:Mt.a.modalOverlay,children:t})},qt=r(57),Qt=r.n(qt),Xt=document.getElementById("react-modals"),Yt=function(e){var t=e.header,r=e.onClose,n=e.children,a=Object(o.useRef)(null),c=Object(o.useCallback)((function(e){27===e.keyCode&&r()}),[r]),s=Object(o.useCallback)((function(e){var t,n=e.target;(null===(t=a.current)||void 0===t?void 0:t.contains(n))||r()}),[r]);return Object(o.useEffect)((function(){return document.addEventListener("keydown",c,!1),document.addEventListener("click",s,!1),function(){document.removeEventListener("keydown",c,!1),document.removeEventListener("click",s,!1)}}),[s,c]),a&&Object(l.createPortal)(Object(et.jsx)(Jt,{children:Object(et.jsxs)("div",{className:Qt.a.modal,ref:a,children:[Object(et.jsxs)("header",{className:Qt.a.header,children:[Object(et.jsx)("div",{className:Qt.a.close,onClick:r,children:Object(et.jsx)(Ye.CloseIcon,{type:"primary"})}),t&&Object(et.jsx)("span",{className:"text text_type_main-medium",children:t})]}),n]})}),Xt)},Kt=function(){var e=Object(Xe.g)(),t=Object(Xe.h)(),r=Object(o.useState)(!1),n=Object(xt.a)(r,2),a=n[0],c=n[1],s=Object(o.useState)(),u=Object(xt.a)(s,2),d=u[0],l=u[1],j=Object(o.useState)("bun"),b=Object(xt.a)(j,2),f=b[0],O=b[1],p=x((function(e){return e.burger.ingredients})),m=x((function(e){return e.burger.loading})),h=Object(o.useRef)(null),g=Object(o.useRef)(null),_=Object(o.useRef)(null),v=Object(o.useRef)(null);return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("section",{className:Ht.a.burgerIngredients,children:[m&&Object(et.jsx)(Gt,{}),!m&&p.length&&Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(et.jsx)(Tt,{bunRef:g,sauceRef:_,mainRef:v,currentTab:f,tabClickHandler:function(e,t){var r;O(e),null===(r=t.current)||void 0===r||r.scrollIntoView({behavior:"smooth"})}}),Object(et.jsx)(It,{bunRef:g,sauceRef:_,mainRef:v,ingredientClickHandler:function(r){var n=p.filter((function(e){return e._id===r})).reduce((function(e,t){return t}),{});c(!0),l(n),e.push({pathname:"/ingredients/".concat(n._id),state:{background:t}})},scrollContainerRef:h,handleScroll:function(){var e,t,r,n,a=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().top)||0,c=(null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect().top)||0,s=(null===(r=_.current)||void 0===r?void 0:r.getBoundingClientRect().top)||0,i=(null===(n=v.current)||void 0===n?void 0:n.getBoundingClientRect().top)||0,o=Math.abs(a-c),u=Math.abs(a-s),d=Math.abs(a-i);O(o<u?"bun":u<d?"sauce":"main")}})]})]}),a&&d&&Object(et.jsx)(Yt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){c(!1),e.push({pathname:"/"})},children:Object(et.jsx)(Lt,Object(i.a)({},d))})]})},Vt=r(240),Zt=r(58),$t=r.n(Zt),er=Object(o.memo)((function(e){var t=e.findIngredient,r=e.moveIngredient,n=e.ingredient,a=h(),c=x((function(e){return e.burger})).selectedIngredients,s=function(e){var t=c.filter((function(t){return t._id===e})).reduce((function(e,t){return t}),{});a(function(e){return function(t){t({type:me,ingredient:e})}}(t)),a(function(e){return function(t){t({type:_e,ingredient:e})}}(t))},o=n.uniqueID,u=t?t(o).index:null,d=Object(_t.a)((function(){return{type:"burger",item:{uniqueID:o,originalIndex:u},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=e.uniqueID,a=e.originalIndex;t.didDrop()||r(n,a)}}}),[o,u,r]),l=Object(xt.a)(d,2),j=l[0].isDragging,b=l[1],f=Object(Vt.a)((function(){return{accept:"burger",canDrop:function(){return!1},hover:function(e){var n=e.uniqueID;if(n!==o){var a=t(o).index;r(n,a)}}}}),[t,r]),O=Object(xt.a)(f,2)[1],p=j?0:1;return Object(et.jsxs)("div",{className:$t.a.ingredient,ref:function(e){return b(O(e))},style:{opacity:p},children:[Object(et.jsx)("div",{className:$t.a.drag,children:Object(et.jsx)(Ye.DragIcon,{type:"primary"})}),Object(et.jsx)("div",{className:$t.a.ingredientEl,children:Object(et.jsx)(Ye.ConstructorElement,Object(i.a)(Object(i.a)({},n),{},{handleClose:function(){return s(n._id)}}))})]})})),tr=r(83),rr=r.n(tr),nr=["type","text"],ar=Object(o.memo)((function(e){var t=e.type,r=e.text,n=Object(dt.a)(e,nr),a="".concat(r,"top"===t?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)");return Object(et.jsx)("div",{className:rr.a.ingredient,children:Object(et.jsx)("div",{className:rr.a.ingredientEl,children:Object(et.jsx)(Ye.ConstructorElement,Object(i.a)(Object(i.a)({},n),{},{type:t,text:a}))})})})),cr=function(e,t){return{type:t,isLocked:!0,_id:null===e||void 0===e?void 0:e._id,uniqueID:null===e||void 0===e?void 0:e.uniqueID,text:null===e||void 0===e?void 0:e.name,price:null===e||void 0===e?void 0:e.price,thumbnail:null===e||void 0===e?void 0:e.image}},sr=function(e){return e.filter((function(e){return"bun"!==e.type})).map((function(e){return{_id:null===e||void 0===e?void 0:e._id,uniqueID:null===e||void 0===e?void 0:e.uniqueID,text:null===e||void 0===e?void 0:e.name,price:null===e||void 0===e?void 0:e.price,thumbnail:null===e||void 0===e?void 0:e.image}}))},ir=r(41),or=r.n(ir),ur=r(59),dr=r.n(ur),lr=r.p+"static/media/done.85c3a14d.svg",jr=function(){var e=h(),t=x((function(e){return e.orderReducer})).order;Object(o.useEffect)((function(){return function(){e((function(e){e({type:he})}))}}),[e]);var r="".concat(dr.a.orderId," text text_type_digits-large"),n="".concat(dr.a.textGrey," text text_type_main-default mt-2");return Object(et.jsxs)("div",{className:dr.a.orderAccepted,children:[Object(et.jsx)("span",{className:r,children:null===t||void 0===t?void 0:t.number}),Object(et.jsx)("span",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(et.jsx)("img",{src:lr,alt:"Done",className:"mt-15"}),Object(et.jsx)("span",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(et.jsx)("span",{className:n,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},br=function(){var e=h(),t=Object(Xe.g)(),r=Object(o.useState)(!1),n=Object(xt.a)(r,2),a=n[0],c=n[1],s=x((function(e){return e.burger.selectedIngredients})),i=x((function(e){return e.auth})).isAuthorized,u=x((function(e){return e.orderReducer})),d=u.loading,l=u.order,j=s.map((function(e){return e._id}));Object(o.useEffect)((function(){!d&&l&&j.length&&e(function(e){return{type:H,payload:e}}({name:l.name,orderNumber:l.number,ingredientIDs:j}))}),[e,d,l,j]);var b=function(){var r=Object(v.a)(_.a.mark((function r(){return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i||t.push("/login"),s.filter((function(e){return"bun"===e.type})).length){r.next=4;break}return r.abrupt("return",null);case 4:e(Ge(j)),c(!0);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(et.jsxs)(et.Fragment,{children:[d&&Object(et.jsx)("div",{children:Object(et.jsx)(Gt,{})}),!d&&Object(et.jsx)(Ye.Button,{type:"primary",size:"large",onClick:b,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),a&&!d&&l&&Object(et.jsx)(Yt,{onClose:function(){c(!1)},children:Object(et.jsx)(jr,{})})]})},fr=function(){var e=x((function(e){return e.burger.selectedIngredients})).reduce((function(e,t){return e+t.price}),0);return Object(et.jsx)("span",{className:"text text_type_digits-medium",children:e})},Or=Object(o.memo)((function(e){var t=e.onDropHandler,r=h(),n=x((function(e){return e.burger.selectedIngredients})),a=Object(Vt.a)({accept:"burgerIngredient",collect:function(e){return{isHoverConstructor:e.isOver()}},drop:function(e){t(e)}}),c=Object(xt.a)(a,2),s=c[0].isHoverConstructor,u=c[1],d=Object(o.useCallback)((function(e){var t=n.filter((function(t){return t.uniqueID===e}))[0];return{ingredient:t,index:n.indexOf(t)}}),[n]),l=Object(o.useCallback)((function(e,t){var n=d(e),a=n.ingredient,c=n.index;r(function(e,t,r){return function(n){n({type:xe,ingredient:e,index:t,atIndex:r})}}(a,c,t||0))}),[r,d]),j=Object(Vt.a)({accept:"burger",collect:function(e){return{isHover:e.isOver()}}}),b=Object(xt.a)(j,2),f=b[0].isHover,O=b[1],p=n.find((function(e){return"bun"===e.type})),m=s?"lightgreen":"transparent",g=f?"lightgreen":"transparent";return Object(et.jsxs)("section",{ref:u,className:or.a.ingredients,style:{borderColor:m},children:[p&&Object(et.jsx)(ar,Object(i.a)({},cr(p,"top"))),Object(et.jsx)("div",{ref:O,className:or.a.ingredientsMiddle,style:{borderColor:g},children:n.length>0&&Object(et.jsx)("div",{className:or.a.middle,children:sr(n).map((function(e,t){return Object(et.jsx)(er,{findIngredient:d,moveIngredient:l,ingredient:e},e._id+t)}))})}),p&&Object(et.jsx)(ar,Object(i.a)({},cr(p,"bottom"))),n.length>0&&Object(et.jsxs)("div",{className:or.a.bottom,children:[Object(et.jsx)(fr,{}),Object(et.jsx)("div",{className:"ml-2 mr-10 mt-1",children:Object(et.jsx)(Ye.CurrencyIcon,{type:"primary"})}),Object(et.jsx)(br,{})]})]})})),pr=function(){var e=h(),t=Object(Xe.g)(),r=x((function(e){return e.burger})),n=r.ingredients,a=r.selectedIngredients,c=Object(b.d)();Object(o.useEffect)((function(){"POP"===t.action&&t.push(t.location.pathname)}),[t]);return Object(et.jsxs)(mt.a,{backend:pt.a,children:[Object(et.jsx)(Kt,{}),Object(et.jsx)(Or,{onDropHandler:function(t){var r=n.filter((function(e){return e._id===t.id})).reduce((function(e,t){return t}),{});if(!a.length&&"bun"!==r.type)return c.show("\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0434\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u0443\u043b\u043a\u0443"),!1;e(function(e){return function(t){t({type:pe,ingredient:e})}}(r)),e(function(e){return function(t){t({type:ge,ingredient:e})}}(r))}})]})},mr=r(16),xr=r(119),hr=r.n(xr),gr=[{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",path:"/profile"},{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",path:"/profile/orders"},{title:"\u0412\u044b\u0445\u043e\u0434",path:"/logout"}],_r=function(){var e=h(),t=Object(Xe.g)(),r=t.location,n=Object(o.useState)("/profile"),a=Object(xt.a)(n,2),c=a[0],s=a[1],i=x((function(e){return e.auth})).refreshToken;Object(o.useEffect)((function(){s(r.pathname)}),[r.pathname]);return Object(et.jsx)("div",{className:hr.a.tabs,children:gr.map((function(r){return Object(et.jsx)(Ye.Tab,{value:r.path,active:c===r.path,onClick:function(){return function(r){if("/logout"===r.path)return e(Ue(i)),void t.push("/login");s(r.path),t.push(r.path)}(r)},children:r.title},r.path)}))})},vr=r(28),yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(e,"_").concat((new Date).getTime()+t)},Nr=function(e,t){var r=[Object(i.a)(Object(i.a)({},e),{},{uniqueID:yr(e._id)})],n=Object(vr.a)(t);return"bun"===e.type&&(r.push(Object(i.a)(Object(i.a)({},e),{},{uniqueID:yr(e._id,100)})),n=t.filter((function(e){return"bun"!==e.type}))),r.concat(n)},Er=function(e,t){return t.filter((function(t){return t.uniqueID!==e.uniqueID}))},wr=function(e,t){return t.map((function(t){var r=1;return"bun"===e.type&&(r=2,delete t.count),t._id===e._id&&(t.count?t.count+=r:t.count=r),t}))},Sr=function(e,t){return t.map((function(t){return t._id===e._id&&(1===t.count?delete t.count:t.count&&t.count>1&&(t.count-=1)),t}))},Ir=r(85),kr=r.n(Ir),Cr={name:"",email:"",password:""},Tr={name:!1},Rr=function(){var e=h(),t=Object(o.useState)(Cr),r=Object(xt.a)(t,2),n=r[0],a=r[1],c=Object(o.useState)(Tr),s=Object(xt.a)(c,2),u=s[0],d=s[1],l=x((function(e){return e.profile})).user,j=Object(b.d)();Object(o.useEffect)((function(){e(qe())}),[e]),Object(o.useEffect)((function(){a((function(e){return Object(i.a)(Object(i.a)({},e),l)}))}),[l]);var f=function(e){var t=e.target,r=t.name,c=t.value;a(Object(i.a)(Object(i.a)({},n),{},Object(mr.a)({},r,c))),d(Object(i.a)(Object(i.a)({},u),{},Object(mr.a)({},r,!1)))};return Object(et.jsxs)("div",{className:kr.a.profile,children:[Object(et.jsx)(_r,{}),Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(Qe(function(e){var t=Object(i.a)({},e);for(var r in t)t[r]||delete t[r];return t}(n))),a((function(e){return Object(i.a)(Object(i.a)({},e),{},{password:""})})),j.show("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")},className:kr.a.form,children:[Object(et.jsx)(Ye.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:f,value:n.name,name:"name",size:"default",error:u.name,errorText:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.EmailInput,{onChange:f,value:n.email,name:"email"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.PasswordInput,{onChange:f,value:n.password,name:"password"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(et.jsx)("div",{className:"mr-4"}),Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",onClick:function(){a(Object(i.a)(Object(i.a)({},l),{},{password:""}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})},Dr=r(238),Ur=r(26),Ar=r.n(Ur),Pr={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",created:"\u0421\u043e\u0437\u0434\u0430\u043d"},Lr=function(e){var t=e.orderId,r=e.ingredients,n=e.ordersAll.orders.filter((function(e){return Number(e.number)===Number(t)})),a=Object(xt.a)(n,1)[0];if(!a)return null;var c=a.ingredients.reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),s=r.filter((function(e){return a.ingredients.includes(e._id)})).map((function(e){return e.amount=c[e._id],e})),i=s.filter((function(e){return a.ingredients.includes(e._id)})).reduce((function(e,t){return e+t.price*(t.amount||1)}),0);return Object(et.jsxs)("div",{className:Ar.a.feedDetails,children:[Object(et.jsxs)("div",{className:"text text_type_digits-default",style:{textAlign:"center"},children:["#",t]}),Object(et.jsx)("div",{className:"mb-10"}),Object(et.jsx)("div",{className:"text text_type_main-medium",children:a.name}),Object(et.jsx)("div",{className:"mb-3"}),Object(et.jsx)("div",{className:"text text_type_digits-small",style:{color:"#00CCCC"},children:Pr[a.status]}),Object(et.jsx)("div",{className:"mb-15"}),Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)("div",{className:Ar.a.feedOrderList,children:s.map((function(e,t){return Object(et.jsxs)(o.Fragment,{children:[Object(et.jsxs)("div",{className:Ar.a.feedOrder,children:[Object(et.jsx)("div",{children:Object(et.jsx)("img",{src:"/ingredient-preview/".concat(e._id,".png"),alt:"Ingredient"})}),Object(et.jsx)("div",{className:"mr-4"}),Object(et.jsx)("div",{className:"text text_type_main-default",style:{maxWidth:350},children:e.name}),Object(et.jsx)("div",{className:"mr-4"}),Object(et.jsxs)("div",{className:Ar.a.price,children:[Object(et.jsxs)("div",{className:"text text_type_digits-default mr-2",children:[e.amount," x ",e.price]}),Object(et.jsx)("div",{className:Ar.a.currencyIcon,children:Object(et.jsx)(Ye.CurrencyIcon,{type:"primary"})})]})]}),Object(et.jsx)("div",{className:"mb-4"})]},t)}))}),Object(et.jsx)("div",{className:"mb-10"}),Object(et.jsxs)("div",{className:Ar.a.bottom,children:[Object(et.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:Object(Dr.a)(new Date(a.createdAt),"dd.MM.yyyy HH:mm:ss")}),Object(et.jsxs)("div",{className:Ar.a.price,children:[Object(et.jsx)("div",{className:"text text_type_digits-default mr-2",children:i}),Object(et.jsx)("div",{className:Ar.a.currencyIcon,children:Object(et.jsx)(Ye.CurrencyIcon,{type:"primary"})})]})]})]})},Fr=r(120),Hr=r.n(Fr),zr=r(86),Wr=r.n(zr),Gr=r(87),Br=r.n(Gr),Mr=function(e){var t=e.ingredient,r=e.ingredientsCount,n=e.index;if(n+1>4)return null;var a=r-4;return Object(et.jsxs)("div",{className:Br.a.cardIngredient,style:{zIndex:10-n},children:[r>4&&n+1===4&&Object(et.jsx)("div",{className:Br.a.hasMore,children:a>0&&Object(et.jsxs)("div",{className:"text text_type_digits-default",children:["+",r-4]})}),Object(et.jsx)("img",{src:"/ingredient-preview/".concat(t,".png"),alt:"Ingredient"})]})},Jr=r(29),qr=r.n(Jr),Qr=function(e){var t=e.order,r=e.ingredients,n=e.cardClickHandler,a=Object(Xe.g)().location,c=Object(o.useState)(!1),s=Object(xt.a)(c,2),i=s[0],u=s[1];Object(o.useEffect)((function(){"/profile/orders"===a.pathname&&u(!0)}),[a.pathname]);var d=t.ingredients.reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),l=r.filter((function(e){return t.ingredients.includes(e._id)})).map((function(e){return e.amount=d[e._id],e})).filter((function(e){return t.ingredients.includes(e._id)})).reduce((function(e,t){return e+t.price*(t.amount||1)}),0);return Object(et.jsx)("div",{className:qr.a.cards,onClick:function(){return n(t)},children:Object(et.jsxs)("div",{className:qr.a.card,children:[Object(et.jsxs)("div",{className:qr.a.cardHeader,children:[Object(et.jsxs)("div",{className:"text text_type_digits-default",children:["#",t.number]}),Object(et.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:Object(Dr.a)(new Date(t.createdAt),"dd.MM.yyyy HH:mm:ss")})]}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)("div",{className:"text text_type_main-medium",children:t.name}),i&&Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("div",{className:"mb-2"}),Object(et.jsx)("div",{className:"text text_type_digits-small",style:{color:"#00CCCC"},children:Pr[t.status]})]}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsxs)("div",{className:qr.a.cardInfo,children:[Object(et.jsx)("div",{className:qr.a.cardIngredients,children:t.ingredients.map((function(e,r){return Object(et.jsx)(Mr,{ingredient:e,ingredientsCount:t.ingredients.length,index:r},r)}))}),Object(et.jsxs)("div",{className:qr.a.price,children:[Object(et.jsx)("div",{className:"text text_type_digits-default mr-2",children:l}),Object(et.jsx)("div",{className:qr.a.currencyIcon,children:Object(et.jsx)(Ye.CurrencyIcon,{type:"primary"})})]})]})]})})},Xr=["cardClickHandler","ingredients"],Yr=function(e){var t=e.cardClickHandler,r=e.ingredients,n=Object(dt.a)(e,Xr).orders;return n?n.length?Object(et.jsx)("div",{className:Wr.a.cardsWrapper,children:n.map((function(e){return Object(et.jsx)(Qr,{order:e,ingredients:r,cardClickHandler:t},e.number)}))}):Object(et.jsxs)("div",{className:Wr.a.cardsWrapper,children:[Object(et.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432."}),Object(et.jsx)("p",{children:"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u0432\u0430\u0448 \u043f\u0435\u0440\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437 :)"})]}):null},Kr=function(){var e=Object(Xe.g)(),t=Object(Xe.h)(),r=Object(o.useState)(!1),n=Object(xt.a)(r,2),a=n[0],c=n[1],s=Object(o.useState)(""),u=Object(xt.a)(s,2),d=u[0],l=u[1],j=x((function(e){return e.burger.ingredients})),b=x((function(e){return e.wsUserReducer})).userOrders,f=Object(xt.a)(b,1)[0];if(Object(o.useEffect)((function(){"POP"===e.action&&e.push(e.location.pathname)}),[e]),!f)return null;return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("div",{className:Hr.a.profileOrders,children:[Object(et.jsx)(_r,{}),Object(et.jsx)(Yr,Object(i.a)(Object(i.a)({},f),{},{ingredients:j,cardClickHandler:function(r){c(!0),l(String(r.number)),e.push({pathname:"/profile/orders/".concat(r.number),state:{background:t}})}}))]}),a&&Object(et.jsx)(Yt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:function(){c(!1),e.push({pathname:"/profile/orders"})},children:Object(et.jsx)(Lr,{orderId:d,ingredients:j,ordersAll:f})})]})},Vr=r(121),Zr=r.n(Vr),$r=function(){var e=Object(Xe.i)().orderId,t=x((function(e){return e.burger})).ingredients,r=x((function(e){return e.wsReducer.orders})),n=Object(xt.a)(r,1)[0];return n?Object(et.jsx)("div",{className:Zr.a.order,children:Object(et.jsx)(Lr,{orderId:e,ingredients:t,ordersAll:n})}):null},en=r(32),tn=r.n(en),rn={email:"",password:""},nn=function(){var e,t,r=h(),n=Object(o.useState)(rn),a=Object(xt.a)(n,2),c=a[0],s=a[1],u=Object(Xe.h)(),d=x((function(e){return e.auth})),l=d.isAuthorized,j=d.error;if(l)return Object(et.jsx)(Xe.a,{to:{pathname:(null===(e=u.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/"}});var b=function(e){var t=e.target,r=t.name,n=t.value;s(Object(i.a)(Object(i.a)({},c),{},Object(mr.a)({},r,n)))},f="".concat(tn.a.flexRow," text text_type_main-default text_color_inactive"),O="".concat(tn.a.error," mt-6 mb-8");return Object(et.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.email&&c.email.trim()&&c.password&&c.password.trim()&&r(De(c))},className:tn.a.login,children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.EmailInput,{onChange:b,value:c.email,name:"email"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.PasswordInput,{onChange:b,value:c.password,name:"password"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),j&&Object(et.jsx)("div",{className:O,children:j}),!j&&Object(et.jsx)("div",{className:"mb-20"}),Object(et.jsxs)("div",{className:f,children:[Object(et.jsx)("div",{className:"mr-1",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(et.jsx)("div",{children:Object(et.jsx)(m.b,{to:"/register",className:tn.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsxs)("div",{className:f,children:[Object(et.jsx)("div",{className:"mr-1",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(et.jsx)("div",{children:Object(et.jsx)(m.b,{to:"/forgot-password",className:tn.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})]})]})},an=function(e,t,r){var n=!0;return e.forEach((function(e){t[e]&&""!==t[e].trim()||(n=!1,r((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(mr.a)({},e,!0))})))})),n},cn=r(42),sn=r.n(cn),on={name:"",email:"",password:""},un={name:!1,email:!1,password:!1},dn=["name","email","password"],ln=function(){var e=h(),t=Object(o.useState)(on),r=Object(xt.a)(t,2),n=r[0],a=r[1],c=Object(o.useState)(un),s=Object(xt.a)(c,2),u=s[0],d=s[1],l=x((function(e){return e.auth})).error,j=function(e){var t=e.target,r=t.name,c=t.value;a(Object(i.a)(Object(i.a)({},n),{},Object(mr.a)({},r,c))),d(Object(i.a)(Object(i.a)({},u),{},Object(mr.a)({},r,!1)))};if(localStorage.getItem("refreshToken"))return Object(et.jsx)(Xe.a,{to:{pathname:"/"}});var b="".concat(sn.a.flexRow," text text_type_main-default text_color_inactive"),f="".concat(sn.a.error," mt-6 mb-8");return Object(et.jsx)("div",{className:sn.a.register,children:Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),an(dn,n,d)&&e(Pe(n))},children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:j,value:n.name,name:"name",size:"default",error:u.name,errorText:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.EmailInput,{onChange:j,value:n.email,name:"email"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.PasswordInput,{onChange:j,value:n.password,name:"password"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),l&&Object(et.jsx)("div",{className:f,children:l}),!l&&Object(et.jsx)("div",{className:"mb-20"}),Object(et.jsxs)("div",{className:b,children:[Object(et.jsx)("div",{className:"mr-1",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(et.jsx)("div",{children:Object(et.jsx)(m.b,{to:"/login",className:sn.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})})},jn=r(43),bn=r.n(jn),fn=function(){var e=h(),t=Object(Xe.g)(),r=Object(o.useState)({email:""}),n=Object(xt.a)(r,2),a=n[0],c=n[1],s=x((function(e){return e.auth})),i=s.emailReset,u=s.error,d=localStorage.getItem("refreshToken");Object(o.useEffect)((function(){i&&t.replace("/reset-password")}),[t,i]);if(d)return Object(et.jsx)(Xe.a,{to:{pathname:"/"}});var l="".concat(bn.a.flexRow," text text_type_main-default text_color_inactive"),j="".concat(bn.a.error," mt-6 mb-4");return Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a.email&&a.email.trim()&&e(Le(a.email))},className:bn.a.forgotPassword,children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.EmailInput,{onChange:function(e){var t=e.target;c({email:t.value})},value:a.email,name:"email"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),u&&Object(et.jsx)("div",{className:j,children:u}),!u&&Object(et.jsx)("div",{className:"mb-20"}),Object(et.jsxs)("div",{className:l,children:[Object(et.jsx)("div",{className:"mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(et.jsx)("div",{children:Object(et.jsx)(m.b,{to:"/login",className:bn.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},On=r(44),pn=r.n(On),mn={password:"",code:""},xn={code:!1},hn=["code"],gn=function(){var e=h(),t=Object(o.useState)(mn),r=Object(xt.a)(t,2),n=r[0],a=r[1],c=Object(o.useState)(xn),s=Object(xt.a)(c,2),u=s[0],d=s[1],l=x((function(e){return e.auth})),j=l.isAuthorized,b=l.emailReset,f=l.error,O=function(e){var t=e.target,r=t.name,c=t.value;a(Object(i.a)(Object(i.a)({},n),{},Object(mr.a)({},r,c))),d(Object(i.a)(Object(i.a)({},u),{},Object(mr.a)({},r,!1)))};if(j)return Object(et.jsx)(Xe.a,{to:{pathname:"/"}});if(!b)return Object(et.jsx)(Xe.a,{to:{pathname:"/forgot-password"}});var p="".concat(pn.a.flexRow," text text_type_main-default text_color_inactive"),g="".concat(pn.a.error," mt-6 mb-8");return Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),an(hn,n,d)&&(e(Fe(n)),e(Re(!1)))},className:pn.a.resetPassword,children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.PasswordInput,{onChange:O,value:n.password,name:"password"}),Object(et.jsx)("div",{className:"mb-4"}),Object(et.jsx)(Ye.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:O,value:n.code,name:"code",size:"default",error:u.code,errorText:"\u041a\u043e\u0434 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),Object(et.jsx)("div",{className:"mb-6"}),Object(et.jsx)(Ye.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),f&&Object(et.jsx)("div",{className:g,children:f}),!f&&Object(et.jsx)("div",{className:"mb-20"}),Object(et.jsxs)("div",{className:p,children:[Object(et.jsx)("div",{className:"mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(et.jsx)("div",{children:Object(et.jsx)(m.b,{to:"/login",className:pn.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},_n=r(122),vn=r.n(_n),yn=function(e){var t,r=e.text,n=e.amount;return Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:"text text_type_main-medium",children:[r,":"]}),Object(et.jsx)("div",{className:"text text_type_digits-large",children:Object(et.jsx)("span",{className:vn.a.textShadow,children:(t=n,t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))})})]})},Nn=r(60),En=r.n(Nn),wn=function(e){var t=e.total,r=e.totalToday,n=e.orders,a=n.filter((function(e,t){return"done"===e.status&&t<10})).map((function(e){return{_id:e._id,number:e.number}})),c=n.filter((function(e,t){return"pending"===e.status&&t<10})).map((function(e){return{_id:e._id,number:e.number}}));return Object(et.jsxs)("div",{className:En.a.ordersStatusList,children:[Object(et.jsxs)("div",{className:En.a.ordersReadyAndInProgress,children:[Object(et.jsxs)("div",{className:En.a.ordersReady,children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(et.jsx)("div",{className:"mb-6"}),a.map((function(e){return Object(et.jsxs)(o.Fragment,{children:[Object(et.jsx)("div",{className:"text text_type_digits-default",style:{color:"#00CCCC"},children:e.number}),Object(et.jsx)("div",{className:"mb-2"})]},e._id)}))]}),Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(et.jsx)("div",{className:"mb-6"}),c.map((function(e){return Object(et.jsxs)(o.Fragment,{children:[Object(et.jsx)("div",{className:"text text_type_digits-default",children:e.number}),Object(et.jsx)("div",{className:"mb-2"})]},e._id)}))]})]}),Object(et.jsx)("div",{className:"mb-15"}),Object(et.jsx)(yn,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f",amount:t}),Object(et.jsx)("div",{className:"mb-15"}),Object(et.jsx)(yn,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",amount:r})]})},Sn=r(88),In=r.n(Sn),kn=function(){var e=Object(Xe.g)(),t=Object(Xe.h)(),r=Object(o.useState)(!1),n=Object(xt.a)(r,2),a=n[0],c=n[1],s=Object(o.useState)(""),u=Object(xt.a)(s,2),d=u[0],l=u[1],j=x((function(e){return e.burger})).ingredients,b=x((function(e){return e.wsReducer.orders})),f=Object(xt.a)(b,1)[0];if(Object(o.useEffect)((function(){"POP"===e.action&&e.push(e.location.pathname)}),[e]),!f)return null;return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("section",{className:In.a.feedsWrapper,children:[Object(et.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(et.jsxs)("div",{className:In.a.feeds,children:[Object(et.jsx)(Yr,Object(i.a)(Object(i.a)({},f),{},{ingredients:j,cardClickHandler:function(r){c(!0),l(String(r.number)),e.push({pathname:"/feed/".concat(r.number),state:{background:t}})}})),Object(et.jsx)(wn,Object(i.a)({},f))]})]}),a&&Object(et.jsx)(Yt,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:function(){c(!1),e.push({pathname:"/feed"})},children:Object(et.jsx)(Lr,{orderId:d,ingredients:j,ordersAll:f})})]})},Cn=r(123),Tn=r.n(Cn),Rn=function(){var e=Object(Xe.i)().orderId,t=x((function(e){return e.burger})).ingredients,r=x((function(e){return e.wsReducer.orders}));if(!(null===r||void 0===r?void 0:r.length))return null;var n=Object(xt.a)(r,1)[0];return n?Object(et.jsx)("div",{className:Tn.a.feed,children:Object(et.jsx)(Lr,{orderId:e,ingredients:t,ordersAll:n})}):null},Dn=r(124),Un=r.n(Dn),An=function(){var e=Object(Xe.i)().ingredientId,t=Object(o.useState)(null),r=Object(xt.a)(t,2),n=r[0],a=r[1],c=x((function(e){return e.burger.ingredients}));return Object(o.useEffect)((function(){if(c.length){var t=c.find((function(t){return t._id===e}))||null;a(t)}}),[c,e]),Object(et.jsx)("div",{className:Un.a.ingredient,children:n&&Object(et.jsx)(Lt,Object(i.a)({},n))})},Pn=r(45),Ln=r.n(Pn),Fn=function(){var e=Object(Xe.h)();return Object(et.jsxs)("div",{className:Ln.a.noMatch,children:[Object(et.jsx)("span",{className:Ln.a.notFound,children:"404"}),Object(et.jsxs)("span",{className:Ln.a.path,children:["Page not found for ",e.pathname]}),Object(et.jsx)(m.b,{to:"/",className:Ln.a.path,children:"Go to main page"})]})},Hn=function(){var e=Object(Xe.h)(),t=e.state&&e.state.background;return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)(ut,{}),Object(et.jsx)(Ot,{children:Object(et.jsxs)(Xe.d,{location:t||e,children:[Object(et.jsx)(Xe.b,{path:"/login",exact:!0,children:Object(et.jsx)(nn,{})}),Object(et.jsx)(Xe.b,{path:"/register",exact:!0,children:Object(et.jsx)(ln,{})}),Object(et.jsx)(Xe.b,{path:"/forgot-password",exact:!0,children:Object(et.jsx)(fn,{})}),Object(et.jsx)(Xe.b,{path:"/reset-password",exact:!0,children:Object(et.jsx)(gn,{})}),Object(et.jsx)(Xe.b,{path:"/ingredients/:ingredientId",children:Object(et.jsx)(An,{})}),Object(et.jsx)(Xe.b,{path:"/feed/:orderId",children:Object(et.jsx)(Rn,{})}),Object(et.jsx)(Xe.b,{path:"/feed",exact:!0,children:Object(et.jsx)(kn,{})}),Object(et.jsx)(Xe.b,{path:"/",exact:!0,children:Object(et.jsx)(pr,{})}),Object(et.jsx)(jt,{path:"/profile",exact:!0,children:Object(et.jsx)(Rr,{})}),Object(et.jsx)(jt,{path:"/profile/orders/:orderId",children:Object(et.jsx)($r,{})}),Object(et.jsx)(jt,{path:"/profile/orders",exact:!0,children:Object(et.jsx)(Kr,{})}),Object(et.jsx)(Xe.b,{path:"*",children:Object(et.jsx)(Fn,{})})]})})]})},zn=function(){var e=h();return function(){var e=h(),t=x((function(e){return e.auth})).isAuthorized;Object(o.useEffect)((function(){var r,n=null!==(r=N("token"))&&void 0!==r?r:"",a=localStorage.getItem("refreshToken");!t&&a&&e(Te({accessToken:n,refreshToken:a}))}),[e,t])}(),Object(o.useEffect)((function(){e(ze()),e({type:U}),e({type:z})}),[e]),Object(et.jsx)(m.a,{children:Object(et.jsx)(Hn,{})})},Wn=r(24),Gn=r(125),Bn={error:null,loading:!1,user:null},Mn={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,selectedIngredients:[],selectedIngredient:{},loading:!1,error:null},Jn={loading:!1,user:null,accessToken:null,refreshToken:null,isAuthorized:!1,emailReset:!1,error:null},qn={wsConnected:!1,orders:[]},Qn={wsUserConnected:!1,userOrders:[]},Xn={loading:!1,error:null,order:null},Yn=Object(Wn.b)({burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case fe:return Object(i.a)(Object(i.a)({},e),{},{ingredients:t.data,loading:!1,error:null});case Oe:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});case pe:return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:Nr(t.ingredient,e.selectedIngredients)});case me:return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:Er(t.ingredient,e.selectedIngredients)});case xe:var r=Object(vr.a)(e.selectedIngredients);return r.splice(t.index,1),r.splice(t.atIndex,0,t.ingredient),Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:r});case he:var n=e.ingredients.map((function(e){return e.count=0,e}));return Object(i.a)(Object(i.a)({},e),{},{selectedIngredients:[],ingredients:n});case ge:return Object(i.a)(Object(i.a)({},e),{},{ingredients:wr(t.ingredient,e.ingredients)});case _e:return Object(i.a)(Object(i.a)({},e),{},{ingredients:Sr(t.ingredient,e.ingredients)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,accessToken:t.accessToken,refreshToken:t.refreshToken});case Q:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,accessToken:null,refreshToken:null});case X:return Object(i.a)(Object(i.a)({},e),{},{emailReset:t.emailReset});case Y:return Object(i.a)(Object(i.a)({},e),{},{error:null});case K:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,user:t.data.user,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken});case V:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,error:t.error.toString()});case Z:return Object(i.a)(Object(i.a)({},e),{},{error:null});case $:return Object(i.a)(Object(i.a)({},e),{},{user:null,isAuthorized:!1,accessToken:null,refreshToken:null});case ee:return Object(i.a)(Object(i.a)({},e),{},{error:t.error.toString()});case te:return Object(i.a)(Object(i.a)({},e),{},{error:null});case re:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!0,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken,error:null});case ne:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,accessToken:null,refreshToken:null,error:t.error.toString()});case ae:return Object(i.a)(Object(i.a)({},e),{},{error:null});case ce:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,isAuthorized:!0,accessToken:t.data.accessToken.split("Bearer ")[1],refreshToken:t.data.refreshToken});case se:return Object(i.a)(Object(i.a)({},e),{},{isAuthorized:!1,error:t.error.toString()});case ie:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case oe:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,emailReset:!0});case ue:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:!0});case de:return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case le:return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case je:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:!0});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case we:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,loading:!1,error:null});case Se:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});case Ie:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case ke:return Object(i.a)(Object(i.a)({},e),{},{user:t.data.user,loading:!1,error:null});case Ce:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});default:return e}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(i.a)(Object(i.a)({},e),{},{loading:!0,error:null});case ye:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:null,order:t.data.order});case Ne:return Object(i.a)(Object(i.a)({},e),{},{loading:!1,error:t.error});default:return e}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(i.a)(Object(i.a)({},e),{},{wsConnected:!0});case P:case L:return Object(i.a)(Object(i.a)({},e),{},{wsConnected:!1});case F:return Object(i.a)(Object(i.a)({},e),{},{orders:e.orders.length?[].concat(Object(vr.a)(e.orders),[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]):[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]});default:return e}},wsUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(i.a)(Object(i.a)({},e),{},{wsUserConnected:!0});case G:case B:return Object(i.a)(Object(i.a)({},e),{},{wsUserConnected:!1});case M:return Object(i.a)(Object(i.a)({},e),{},{userOrders:e.userOrders.length?[].concat(Object(vr.a)(e.userOrders),[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]):[Object(i.a)(Object(i.a)({},t.payload),{},{timestamp:(new Date).getTime()/1e3})]});default:return e}}}),Kn=["success"],Vn=["success"],Zn={wsInit:U,wsSendOrder:H,onOpen:A,onClose:L,onError:P,onOrder:F},$n={wsUserInit:z,wsUserSendOrder:J,userOnOpen:W,userOnClose:B,userOnError:G,userOnOrder:M},ea=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:Wn.c)(Object(Wn.a)(Gn.a),Object(Wn.a)((c="wss://norma.nomoreparties.space/orders/all",s=Zn,function(e){var t=null;return function(r){return function(n){var a=e.dispatch,o=e.getState,u=n.type,d=n.payload,l=s.wsInit,j=s.wsSendOrder,b=s.onOpen,f=s.onClose,O=s.onError,p=s.onOrder,m=o().auth.accessToken;if(u===l&&(t=new WebSocket("".concat(c))),t&&(t.onopen=function(e){a({type:b,payload:e})},t.onerror=function(e){a({type:O,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(dt.a)(r,Kn));a({type:p,payload:n})},t.onclose=function(e){a({type:f,payload:e})},u===j)){var x=Object(i.a)(Object(i.a)({},d),{},{token:m});t.send(JSON.stringify(x))}r(n)}}})),Object(Wn.a)((n="wss://norma.nomoreparties.space/orders",a=$n,function(e){var t=null;return function(r){return function(c){var s=e.dispatch,o=e.getState,u=c.type,d=c.payload,l=a.wsUserInit,j=a.wsUserSendOrder,b=a.userOnOpen,f=a.userOnClose,O=a.userOnError,p=a.userOnOrder,m=o().auth.accessToken;if(u===l&&m&&(t=new WebSocket("".concat(n,"?token=").concat(m))),t&&(t.onopen=function(e){s({type:b,payload:e})},t.onerror=function(e){s({type:O,payload:e})},t.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(dt.a)(r,Vn));s({type:p,payload:n})},t.onclose=function(e){s({type:f,payload:e})},u===j)){var x=Object(i.a)(Object(i.a)({},d),{},{token:m});t.send(JSON.stringify(x))}r(c)}}}))),ta=(r(229),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Wn.d)(Yn,e,ea)}());j.a.render(Object(et.jsx)(u.a.StrictMode,{children:Object(et.jsx)(d.a,{store:ta,children:Object(et.jsx)(b.a,Object(i.a)(Object(i.a)({template:f.a},p),{},{children:Object(et.jsx)(zn,{})}))})}),document.getElementById("root")),O()},26:function(e,t,r){e.exports={feedDetails:"feed-details_feedDetails__7ZO_I",feedOrderList:"feed-details_feedOrderList__6W2Y4",feedOrder:"feed-details_feedOrder__2NLVS",price:"feed-details_price__2m7Z4",currencyIcon:"feed-details_currencyIcon__24m1h",bottom:"feed-details_bottom__2RmSR"}},29:function(e,t,r){e.exports={cards:"card_cards__2dc2s",card:"card_card__1py-W",cardHeader:"card_cardHeader__3QlUF",cardInfo:"card_cardInfo__X0cv6",cardIngredients:"card_cardIngredients__1E4al",price:"card_price__1ePjW",currencyIcon:"card_currencyIcon__3SnXu"}},32:function(e,t,r){e.exports={login:"login_login__3BYA9",flexRow:"login_flexRow__2s35h",link:"login_link__2bcVJ",error:"login_error__2R0VM"}},40:function(e,t,r){e.exports={menuItem:"header-item_menuItem__n7cBj",link:"header-item_link__5dJ7M",text:"header-item_text__1EUcT",active:"header-item_active__3w2YP"}},41:function(e,t,r){e.exports={ingredients:"burger-constructor_ingredients__3srro",ingredientsMiddle:"burger-constructor_ingredientsMiddle__2YBUz",middle:"burger-constructor_middle__2oDRJ",bottom:"burger-constructor_bottom__1l2yp"}},42:function(e,t,r){e.exports={register:"register_register__1-FiH",flexRow:"register_flexRow__FfD8I",link:"register_link__2XLtm",error:"register_error__9iRzL"}},43:function(e,t,r){e.exports={forgotPassword:"forgot-password_forgotPassword__2EIQe",flexRow:"forgot-password_flexRow__2D8FM",link:"forgot-password_link__1xRFL",error:"forgot-password_error__38bMz"}},44:function(e,t,r){e.exports={resetPassword:"reset-password_resetPassword__j7gJq",flexRow:"reset-password_flexRow__3_TYL",link:"reset-password_link__2wk5C",error:"reset-password_error__3_maO"}},45:function(e,t,r){e.exports={noMatch:"no-match_noMatch__2vtcG",notFound:"no-match_notFound__12QH4",path:"no-match_path__1CgfL"}},55:function(e,t,r){e.exports={wrapper:"app-header_wrapper__ECTu6",header:"app-header_header__1iHLW",logo:"app-header_logo__zVEfY"}},56:function(e,t,r){e.exports={card:"burger-ingredients-card-item_card__3iZWF",priceCurrency:"burger-ingredients-card-item_priceCurrency__9U12E",currencyIcon:"burger-ingredients-card-item_currencyIcon__1NUuu"}},57:function(e,t,r){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",close:"modal_close__1Iez6"}},58:function(e,t,r){e.exports={ingredient:"burger-constructor-item_ingredient__bbhJg",ingredientEl:"burger-constructor-item_ingredientEl__5HaoO",drag:"burger-constructor-item_drag__4gTMq"}},59:function(e,t,r){e.exports={orderAccepted:"order-details_orderAccepted__3OIcz",orderId:"order-details_orderId__vw7fX",textGrey:"order-details_textGrey__1B3ID"}},60:function(e,t,r){e.exports={ordersStatusList:"order-status-list_ordersStatusList__Mm-pw",ordersReadyAndInProgress:"order-status-list_ordersReadyAndInProgress__YpiOY",ordersReady:"order-status-list_ordersReady__2gKT3"}},82:function(e,t,r){e.exports={ingredientDetails:"ingredient-details_ingredientDetails__20EW8",helpfulness:"ingredient-details_helpfulness__1sUP5"}},83:function(e,t,r){e.exports={ingredient:"burger-constructor-bun_ingredient__14QCe",ingredientEl:"burger-constructor-bun_ingredientEl__2Cbu-"}},85:function(e,t,r){e.exports={profile:"profile_profile__26YER",form:"profile_form__3yKlC"}},86:function(e,t,r){e.exports={cardsWrapper:"card-list_cardsWrapper__3yChi"}},87:function(e,t,r){e.exports={cardIngredient:"feed-card_cardIngredient__320Tz",hasMore:"feed-card_hasMore__souup"}},88:function(e,t,r){e.exports={feedsWrapper:"feeds_feedsWrapper__3glnX",feeds:"feeds_feeds__3jl-H"}}},[[230,1,2]]]);
//# sourceMappingURL=main.f82934bd.chunk.js.map